<?xml version="1.0" encoding="utf-8"?>
<search> 
  
    
    <entry>
      <title>Mongodb Replica Set 集群配置</title>
      <link href="/2016/10/11/Mongodb-Replica-Set-%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AE/"/>
      <url>/2016/10/11/Mongodb-Replica-Set-%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AE/</url>
      <content type="html"><![CDATA[<blockquote><p>Replica Set  为 mongodb 3.0 以上版本官方推荐的群集方法<br>Mongodb 3.0 以上版本使用 Replica Set 搭建 Mongodb 集群服务，原 master-slave 则在3.0以上版本为不推荐使用<br><a href="https://docs.mongodb.com/manual/core/replica-set-architectures/" target="_blank" rel="noopener">https://docs.mongodb.com/manual/core/replica-set-architectures/</a><br>Replica Set （副本集）支持一台写，多台读, 分片 (sharding) 则可以支持每个分片放置副本集 <a href="https://docs.mongodb.com/manual/sharding/" target="_blank" rel="noopener">https://docs.mongodb.com/manual/sharding/</a></p></blockquote><h2 id="防火墙设定"><a href="#防火墙设定" class="headerlink" title="防火墙设定"></a>防火墙设定</h2><a id="more"></a><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ufw allow 27017/tcp <span class="comment"># 允许 27017端口通过</span></span><br></pre></td></tr></table></figure><h2 id="所有服务器的-mongod-conf-一般位于-etc-mongod-conf"><a href="#所有服务器的-mongod-conf-一般位于-etc-mongod-conf" class="headerlink" title="所有服务器的 mongod.conf (一般位于 /etc/mongod.conf)"></a>所有服务器的 mongod.conf (一般位于 /etc/mongod.conf)</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">net:</span><br><span class="line">  port: 27017</span><br><span class="line">  bindIp: 192.168.0.104,192.168.0.107 # 增加其他服务器IP</span><br><span class="line">   </span><br><span class="line">replication:</span><br><span class="line">  replSetName: mongo1 # 副本集名称 所有服务器相同</span><br><span class="line">  oplogSizeMB: 5120 # 大幅性能 https://docs.mongodb.com/manual/reference/configuration-options/#replication-options</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 重新启动所有服务器 mongod 服务</span></span><br><span class="line">service mongod restart</span><br></pre></td></tr></table></figure><h2 id="主-Mongo-设定"><a href="#主-Mongo-设定" class="headerlink" title="主 Mongo 设定"></a>主 Mongo 设定</h2><p>进入 Mongo Shell<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">config = &#123;</span><br><span class="line">    _id: &apos;mongo1&apos;, </span><br><span class="line">    members: [</span><br><span class="line">        &#123;_id: 0, host: &apos;192.168.0.104:27017&apos;, priority:1&#125;, #主mongo</span><br><span class="line">        &#123;_id: 1, host: &apos;192.168.0.107:27017&apos;&#125; #其他 mongo</span><br><span class="line">        ]</span><br><span class="line">&#125;</span><br><span class="line">rs.initiate(config)</span><br><span class="line">rs.conf()</span><br><span class="line">rs.status()</span><br><span class="line"> </span><br><span class="line"># 返回结果</span><br><span class="line"> </span><br><span class="line">&#123;</span><br><span class="line">    &quot;set&quot; : &quot;mongo1&quot;,</span><br><span class="line">    &quot;date&quot; : ISODate(&quot;2016-10-11T08:14:16.365Z&quot;),</span><br><span class="line">    &quot;myState&quot; : 1,</span><br><span class="line">    &quot;members&quot; : [</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;_id&quot; : 0,</span><br><span class="line">            &quot;name&quot; : &quot;192.168.0.104:27017&quot;,</span><br><span class="line">            &quot;health&quot; : 1,</span><br><span class="line">            &quot;state&quot; : 1,</span><br><span class="line">            &quot;stateStr&quot; : &quot;PRIMARY&quot;,</span><br><span class="line">            &quot;uptime&quot; : 1713,</span><br><span class="line">            &quot;optime&quot; : Timestamp(1476173146, 1),</span><br><span class="line">            &quot;optimeDate&quot; : ISODate(&quot;2016-10-11T08:05:46Z&quot;),</span><br><span class="line">            &quot;electionTime&quot; : Timestamp(1476172001, 1),</span><br><span class="line">            &quot;electionDate&quot; : ISODate(&quot;2016-10-11T07:46:41Z&quot;),</span><br><span class="line">            &quot;configVersion&quot; : 84486,</span><br><span class="line">            &quot;self&quot; : true</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;_id&quot; : 1,</span><br><span class="line">            &quot;name&quot; : &quot;192.168.0.107:27017&quot;,</span><br><span class="line">            &quot;health&quot; : 1,</span><br><span class="line">            &quot;state&quot; : 2,</span><br><span class="line">            &quot;stateStr&quot; : &quot;SECONDARY&quot;,</span><br><span class="line">            &quot;uptime&quot; : 1656,</span><br><span class="line">            &quot;optime&quot; : Timestamp(1476173146, 1),</span><br><span class="line">            &quot;optimeDate&quot; : ISODate(&quot;2016-10-11T08:05:46Z&quot;),</span><br><span class="line">            &quot;lastHeartbeat&quot; : ISODate(&quot;2016-10-11T08:14:15.569Z&quot;),</span><br><span class="line">            &quot;lastHeartbeatRecv&quot; : ISODate(&quot;2016-10-11T08:14:14.929Z&quot;),</span><br><span class="line">            &quot;pingMs&quot; : 0,</span><br><span class="line">            &quot;syncingTo&quot; : &quot;192.168.0.104:27017&quot;,</span><br><span class="line">            &quot;configVersion&quot; : 84486</span><br><span class="line">        &#125;</span><br><span class="line">    ],</span><br><span class="line">    &quot;ok&quot; : 1</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"># 如果配置有误  health:0 显示为0</span><br><span class="line"># 重新配置加 force:true</span><br><span class="line">rs.reconfig(config, &#123;force: true&#125;)</span><br></pre></td></tr></table></figure></p><h2 id="增加更多-Mongo"><a href="#增加更多-Mongo" class="headerlink" title="增加更多 Mongo"></a>增加更多 Mongo</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rs.add(<span class="string">"192.168.0.108:27017"</span>)</span><br></pre></td></tr></table></figure><h2 id="删除不使用的-Mongo"><a href="#删除不使用的-Mongo" class="headerlink" title="删除不使用的 Mongo"></a>删除不使用的 Mongo</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rs.remove(<span class="string">"192.168.0.108:27017"</span>)</span><br></pre></td></tr></table></figure><h2 id="其他-Mongo-设定"><a href="#其他-Mongo-设定" class="headerlink" title="其他 Mongo 设定"></a>其他 Mongo 设定</h2><p>进入 Mongo Shell</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rs.slaveOk() <span class="comment">#即可完成数据同步</span></span><br></pre></td></tr></table></figure><blockquote><p>只有主 Mongo 允许写数据，所以测试时进入主 Mongo，创建新 collection ，回到所有 其他  Mongo 通过以下查看同步过来的 collection</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show collections</span><br></pre></td></tr></table></figure><blockquote><p>无法写入错误<br>副本集至少需要有2个以上 Mongod 服务，如果只剩下最后一个 Mongod 服务那就会出现无法写入情况</p></blockquote>]]></content>
      
      
        <tags>
            
            <tag> mongodb </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Mysql 群集配置</title>
      <link href="/2016/10/11/Mysql-%E7%BE%A4%E9%9B%86%E9%85%8D%E7%BD%AE/"/>
      <url>/2016/10/11/Mysql-%E7%BE%A4%E9%9B%86%E9%85%8D%E7%BD%AE/</url>
      <content type="html"><![CDATA[<blockquote><p>Mysql 配置读写分离, 降低读服务器压力</p></blockquote><h2 id="主-Mysql-配置"><a href="#主-Mysql-配置" class="headerlink" title="主 Mysql 配置"></a>主 Mysql 配置</h2><h3 id="编辑主-Mysql-服务器的MySQL配置文件my-cnf"><a href="#编辑主-Mysql-服务器的MySQL配置文件my-cnf" class="headerlink" title="编辑主 Mysql 服务器的MySQL配置文件my.cnf"></a>编辑主 Mysql 服务器的MySQL配置文件my.cnf</h3><blockquote><p>一般位置（/etc/my.cnf / /usr/local/Cellar/mysql/5.6.25/my.cnf）<br>在[mysqld]下面添加以下参数：<br><a id="more"></a></p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">log-bin=mysql-bin #开启MYSQL二进制日志</span><br><span class="line">server-id=1 #服务器ID不能重复</span><br><span class="line">binlog-do-db=brpg #需要做主从备份的数据库名字</span><br><span class="line">expire-logs-days = 7 #只保留7天的二进制日志，以防磁盘被日志占满</span><br></pre></td></tr></table></figure><h3 id="在-A-服务器添加一个用于主从复制的帐号"><a href="#在-A-服务器添加一个用于主从复制的帐号" class="headerlink" title="在 A 服务器添加一个用于主从复制的帐号"></a>在 A 服务器添加一个用于主从复制的帐号</h3><blockquote><p>登陆mysql命令行，执行</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GRANT REPLICATION SLAVE ON *.* TO <span class="string">'帐号'</span>@<span class="string">'从服务器IP'</span> IDENTIFIED BY <span class="string">'密码'</span>;</span><br></pre></td></tr></table></figure><h3 id="在主MySQL服务器上执行命令，把数据库设置成只读状态"><a href="#在主MySQL服务器上执行命令，把数据库设置成只读状态" class="headerlink" title="在主MySQL服务器上执行命令，把数据库设置成只读状态"></a>在主MySQL服务器上执行命令，把数据库设置成只读状态</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">FLUSH TABLES WITH READ LOCK;</span><br></pre></td></tr></table></figure><h3 id="导出数据文件"><a href="#导出数据文件" class="headerlink" title="导出数据文件"></a>导出数据文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqldump -uroot -p brpg &gt; brpg.sql</span><br></pre></td></tr></table></figure><h3 id="回到-Mysql，解封数据库只读状态"><a href="#回到-Mysql，解封数据库只读状态" class="headerlink" title="回到 Mysql，解封数据库只读状态"></a>回到 Mysql，解封数据库只读状态</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UNLOCK TABLES;</span><br></pre></td></tr></table></figure><h3 id="重新启动-Mysql-让主-Mysql-配置生效"><a href="#重新启动-Mysql-让主-Mysql-配置生效" class="headerlink" title="重新启动 Mysql 让主 Mysql 配置生效"></a>重新启动 Mysql 让主 Mysql 配置生效</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service mysqld restart</span><br></pre></td></tr></table></figure><h3 id="记下file及position的值"><a href="#记下file及position的值" class="headerlink" title="记下file及position的值"></a>记下file及position的值</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show master status;</span><br></pre></td></tr></table></figure><h2 id="从-Mysql-配置"><a href="#从-Mysql-配置" class="headerlink" title="从 Mysql 配置"></a>从 Mysql 配置</h2><h3 id="编辑从-Mysql-服务器的MySQL配置文件my-cnf"><a href="#编辑从-Mysql-服务器的MySQL配置文件my-cnf" class="headerlink" title="编辑从 Mysql 服务器的MySQL配置文件my.cnf"></a>编辑从 Mysql 服务器的MySQL配置文件my.cnf</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">server-id=2 #服务器ID不能重复</span><br><span class="line">replicate-do-db=brpg #需要做复制的数据库名</span><br><span class="line">#replicate-ignore-table=brpg.xx #需要自动跳过的表</span><br><span class="line">slave-skip-errors = 1032,1062,126,1114,1146,1048,1396 #自动跳过的错误代码，以防复制出错被中断</span><br></pre></td></tr></table></figure><blockquote><p>Mysql 5.5 或更高版本不支持 master- 相关配置</p></blockquote><h3 id="将主库上备份的数据库恢复到从库"><a href="#将主库上备份的数据库恢复到从库" class="headerlink" title="将主库上备份的数据库恢复到从库"></a>将主库上备份的数据库恢复到从库</h3><h3 id="重启从库MYSQL"><a href="#重启从库MYSQL" class="headerlink" title="重启从库MYSQL"></a>重启从库MYSQL</h3><h3 id="登录从库的MySQL命令行"><a href="#登录从库的MySQL命令行" class="headerlink" title="登录从库的MySQL命令行"></a>登录从库的MySQL命令行</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">change master to master_host=<span class="string">'192.168.0.2'</span>, master_user=<span class="string">'mysqlrun'</span>, master_password=<span class="string">'123'</span>, master_log_file=<span class="string">'file的值'</span>, master_log_pos=position的值;</span><br></pre></td></tr></table></figure><blockquote><p>设置成主库的连接信息，file及position的值是之前记录下来，position的值没有单引号，其他的值要单引号</p></blockquote><h3 id="启动从库连接"><a href="#启动从库连接" class="headerlink" title="启动从库连接"></a>启动从库连接</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">start slave;</span><br></pre></td></tr></table></figure><h3 id="查看从库状态"><a href="#查看从库状态" class="headerlink" title="查看从库状态"></a>查看从库状态</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show slave status\G; <span class="comment">#查看连接情况，是不是两个YES，两个YES为成功</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Slave_IO_Running: Yes</span><br><span class="line">Slave_SQL_Running: Yes</span><br></pre></td></tr></table></figure><h3 id="如果从服务器启动出现报错"><a href="#如果从服务器启动出现报错" class="headerlink" title="如果从服务器启动出现报错"></a>如果从服务器启动出现报错</h3><blockquote><p>Slave_IO_Running: Connect</p></blockquote><blockquote><blockquote><p>需要先检查主 Mysql 的账号密码是否正确<br>主从的 my.cnf bind_ip 一栏设置的 ips 是否正确<br>主服务器与从服务器的防火墙 是否已经允许 3306 进出 (telnet ip:3306)</p></blockquote></blockquote><h4 id="iptables-设置"><a href="#iptables-设置" class="headerlink" title="iptables 设置"></a>iptables 设置</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">service iptables stop</span><br><span class="line">iptables -A INPUT -p tcp -m state --state NEW -m tcp --dport 3306 -j ACCEPT</span><br><span class="line">service iptables save</span><br><span class="line">service iptables start</span><br></pre></td></tr></table></figure><h3 id="ufw-设置"><a href="#ufw-设置" class="headerlink" title="ufw 设置"></a>ufw 设置</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">ufw allow 3306/tcp <span class="comment"># 允许 3306 端口通过</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 其他设置</span></span><br><span class="line">ufw <span class="built_in">disable</span> <span class="comment"># 禁用</span></span><br><span class="line">ufw <span class="built_in">enable</span> <span class="comment"># 启动</span></span><br><span class="line"><span class="comment"># 查看状态</span></span><br><span class="line">ufw status numbered</span><br><span class="line"> </span><br><span class="line">:<span class="comment"># ufw status numbered</span></span><br><span class="line">[ 1] 3306/tcp                   ALLOW IN    Anywhere</span><br><span class="line">[ 2] 3306/tcp (v6)              ALLOW IN    Anywhere (v6)</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 根据序号删除</span></span><br><span class="line">ufw delete 1</span><br><span class="line">ufw delete 2</span><br></pre></td></tr></table></figure><blockquote><p>bash Slave_IO_Running: No<br>Last_IO_Error: Fatal error: The slave I/O thread stops because master and slave have equal MySQL server UUIDs; these UUIDs must be d</p></blockquote><blockquote><blockquote><p>那可能是因为2台服务器是复制过去的，登录任意一台服务器，重新生成 Mysql 的 auto.cnf</p></blockquote></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mv /usr/<span class="built_in">local</span>/mysql/var/auto.cnf /usr/<span class="built_in">local</span>/mysql/var/auto.bak.cnf <span class="comment">#重命名该名称</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service mysql restart <span class="comment"># 重新启动 mysql ，Mysql 会重新生成 auto.cnf</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
        <tags>
            
            <tag> mysql </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>互换 Ctrl / Caps_Lock 按键</title>
      <link href="/2016/05/05/%E4%BA%92%E6%8D%A2-Ctrl-Caps-Lock-%E6%8C%89%E9%94%AE/"/>
      <url>/2016/05/05/%E4%BA%92%E6%8D%A2-Ctrl-Caps-Lock-%E6%8C%89%E9%94%AE/</url>
      <content type="html"><![CDATA[<blockquote><p>交换 Caps_Lock 与 Ctrl 键，与 Unix 键位统一方便快捷键使用</p></blockquote><h2 id="Mac-OS"><a href="#Mac-OS" class="headerlink" title="Mac OS"></a>Mac OS</h2><p>打开系统编好设置 选择 “键盘” 菜单，在 “键盘” 选项卡右下角打开 “修饰键…” 选单</p><p>大写锁定键 -&gt; 选择 Control<br>Control键 -&gt; 选择 大写锁定键</p><p>选择 “好” 即可完成设置</p><blockquote><p>新版系统中 轻触大写锁定键 的功能为 切换中英文输入法，若要打开大写锁定需要长按大写锁定键（即修改后的 Control 键位）</p></blockquote><h2 id="Ubuntu-Debian"><a href="#Ubuntu-Debian" class="headerlink" title="Ubuntu / Debian"></a>Ubuntu / Debian</h2><a id="more"></a><p>新增或修改 ~/.Xmodmap 文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim ~/.Xmodmap</span><br></pre></td></tr></table></figure><p>添加内容</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">remove control = Control_L</span><br><span class="line">remove lock = Caps_Lock</span><br><span class="line">keysym Caps_Lock = Control_L</span><br><span class="line">keysym Control_L = Caps_Lock</span><br><span class="line">add control = Control_L</span><br><span class="line">add lock = Caps_Lock</span><br></pre></td></tr></table></figure><p>添加至 .profile 开机自启动</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim ~/.profile</span><br></pre></td></tr></table></figure><p>添加启动项目延时启动<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sleep 4 &amp;&amp; xmodmap ~/.Xmodmap &amp;</span><br></pre></td></tr></table></figure></p><blockquote><p>重新启动后生效</p></blockquote><h2 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h2><blockquote><p>下载使用 <a href="https://autohotkey.com/" target="_blank" rel="noopener">AutoHotKey</a>，下载完成后直接打开会进入帮助文档</p></blockquote><p>右键 -&gt; 新键 AutoHotKey Script 文本</p><p>加入如下脚本内容</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#NoEnv  ; Recommended for performance and compatibility with future AutoHotkey releases.</span></span><br><span class="line">; <span class="comment">#Warn  ; Enable warnings to assist with detecting common errors.</span></span><br><span class="line">SendMode Input  ; Recommended <span class="keyword">for</span> new scripts due to its superior speed and reliability.</span><br><span class="line">SetWorkingDir %A_ScriptDir%  ; Ensures a consistent starting directory.</span><br><span class="line"></span><br><span class="line">LCtrl::Capslock</span><br><span class="line">Capslock::LCtrl</span><br></pre></td></tr></table></figure><blockquote><p>直接执行本脚本内容即可，添加本脚本至开机启动项实现自动设置</p></blockquote>]]></content>
      
      
    </entry>
    
    <entry>
      <title>Arduino 灯光控制</title>
      <link href="/2016/04/10/Arduino-%E7%81%AF%E5%85%89%E6%8E%A7%E5%88%B6/"/>
      <url>/2016/04/10/Arduino-%E7%81%AF%E5%85%89%E6%8E%A7%E5%88%B6/</url>
      <content type="html"><![CDATA[<blockquote><p>使用 Arduino 光敏、人体红外传感器、舵机来控制灯光开启。这里以不破坏原则使用舵机推动开关来实现开灯和关灯。 实现目标：区域内光线强度不够时，同时有人在区域内驱动舵机推动开关开灯，无人在或光线强度足够则关灯</p></blockquote><h2 id="接线图"><a href="#接线图" class="headerlink" title="接线图"></a>接线图</h2><p><img src="/2016/04/10/Arduino-灯光控制/arduino-1.jpg" alt="接线图"></p><h2 id="控制代码"><a href="#控制代码" class="headerlink" title="控制代码"></a>控制代码</h2><a id="more"></a><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;Servo.h&gt; //舵机驱动库</span></span></span><br><span class="line"></span><br><span class="line">Servo myservo; <span class="comment">// 最多可以控制8路舵机</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  光敏 pin 2</span></span><br><span class="line"><span class="comment"> *  红外 pin 7</span></span><br><span class="line"><span class="comment"> *  舵机 pin 9</span></span><br><span class="line"><span class="comment"> *  [LED] pin 13</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">// 光敏 接在   pin 2</span></span><br><span class="line"><span class="keyword">int</span> brightPin = <span class="number">2</span>; </span><br><span class="line"><span class="comment">// 光值</span></span><br><span class="line"><span class="keyword">int</span> brightVal = <span class="number">0</span>;</span><br><span class="line"><span class="comment">// 小于此值时 开灯</span></span><br><span class="line"><span class="keyword">int</span> minLight = <span class="number">250</span>;</span><br><span class="line"><span class="comment">// LED 13号口</span></span><br><span class="line"><span class="keyword">int</span> ledPin = <span class="number">13</span>;</span><br><span class="line"><span class="comment">// 光线状态</span></span><br><span class="line"><span class="comment">//int brightState = HIGH;</span></span><br><span class="line"><span class="comment">// 红外感应 pin 7</span></span><br><span class="line"><span class="keyword">int</span> infraredPin = <span class="number">7</span>;</span><br><span class="line"><span class="comment">// 人感应状态</span></span><br><span class="line"><span class="keyword">int</span> personState = LOW;</span><br><span class="line"><span class="comment">// light 状态</span></span><br><span class="line"><span class="keyword">int</span> lightState = LOW;</span><br><span class="line"><span class="comment">// 舵机 pin 9</span></span><br><span class="line"><span class="keyword">int</span> switchPin = <span class="number">9</span>;</span><br><span class="line"><span class="comment">//打开灯</span></span><br><span class="line"><span class="keyword">int</span> openLight = HIGH;</span><br><span class="line"><span class="comment">//关闭灯</span></span><br><span class="line"><span class="keyword">int</span> closeLight = LOW;</span><br><span class="line"><span class="comment">//等待 1.5s 后 关灯 1.5 继续检测是否有人运动 弥补 传感器 人未动无法检测的问题</span></span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">long</span> delayMillis = <span class="number">2000</span>;</span><br><span class="line"><span class="comment">//传感器最后更新时间 </span></span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">long</span> lastMillis = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> lightOpen = <span class="number">70</span>; <span class="comment">//开灯角度</span></span><br><span class="line"><span class="keyword">int</span> lightClose = <span class="number">180</span>; <span class="comment">//关灯角度</span></span><br><span class="line">  </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setup</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="comment">// LED 输出</span></span><br><span class="line">  pinMode(ledPin, OUTPUT); </span><br><span class="line">  <span class="comment">// 红外输入</span></span><br><span class="line">  pinMode(infraredPin, INPUT);</span><br><span class="line">  <span class="comment">// 舵机控制信号引脚 </span></span><br><span class="line">  myservo.attach(switchPin);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//串口调试</span></span><br><span class="line">  Serial.begin(<span class="number">9600</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//90 度 默认居中</span></span><br><span class="line">  myservo.write(<span class="number">90</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">loop</span><span class="params">()</span> </span>&#123; </span><br><span class="line"></span><br><span class="line">  <span class="comment">//读取当前角度</span></span><br><span class="line">  <span class="keyword">int</span> nowState = myservo.read();</span><br><span class="line">  Serial.print(<span class="string">"nowState -&gt; "</span>);</span><br><span class="line">  Serial.println(nowState);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 防止人为控制开关 推动舵机方向错误 刷新舵机方向与灯状态值一致</span></span><br><span class="line">  <span class="keyword">if</span> (lightOpen == nowState)&#123;</span><br><span class="line">    Serial.print(<span class="string">"open with high state\n\n"</span>);</span><br><span class="line">    lightState = HIGH;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (lightClose == nowState)&#123;</span><br><span class="line">    Serial.print(<span class="string">"open with low state\n\n"</span>);</span><br><span class="line">    lightState = LOW;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">//当前光状态</span></span><br><span class="line">  <span class="keyword">int</span> brightState = detectiveBright();</span><br><span class="line">  <span class="comment">//保存人是否存在状态</span></span><br><span class="line">  <span class="keyword">int</span> personState = detectivePerson();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 只要取到人存在 就记录一下 时间</span></span><br><span class="line">  <span class="keyword">if</span> (personState)&#123;</span><br><span class="line">    lastMillis = millis(); <span class="comment">// 记录一下 成功取到 的时间</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (<span class="literal">false</span> == brightState)&#123; <span class="comment">//光线不足</span></span><br><span class="line">    <span class="comment">// 刷新状态值保持一致性</span></span><br><span class="line">    lightState = LOW;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 无光 时 只有2种情况需要操作</span></span><br><span class="line">    <span class="comment">// 1 有人 无灯 =&gt; 开灯</span></span><br><span class="line">    <span class="comment">// 2 有灯 无人 =&gt; 关灯</span></span><br><span class="line">    <span class="keyword">if</span> (personState &amp;&amp; LOW == lightState)&#123; <span class="comment">//有人 且 无灯</span></span><br><span class="line">      switchLight(openLight); <span class="comment">//开灯</span></span><br><span class="line">      lastMillis = millis();</span><br><span class="line">      Serial.print(<span class="string">"first start the light,the lastmillis is:"</span>); </span><br><span class="line">      Serial.println(lastMillis); </span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span> (<span class="literal">false</span> == personState &amp;&amp; HIGH == lightState)&#123; <span class="comment">// 有灯 无人</span></span><br><span class="line">      <span class="comment">// 无特殊原因无此情况</span></span><br><span class="line">      Serial.print(<span class="string">" turn off:"</span>); </span><br><span class="line">      Serial.println(brightState); </span><br><span class="line">      switchLight(closeLight);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123; <span class="comment">//光线充足</span></span><br><span class="line">    lightState = HIGH;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (HIGH == lightState &amp;&amp; <span class="literal">false</span> == personState)&#123; <span class="comment">//有光 有灯 无人</span></span><br><span class="line">       <span class="keyword">unsigned</span> <span class="keyword">long</span> currentMillis = millis();</span><br><span class="line">       <span class="keyword">if</span> ((currentMillis - lastMillis) &gt; delayMillis)&#123; <span class="comment">//延迟 n 秒关灯</span></span><br><span class="line">          Serial.print(<span class="string">" turn off:"</span>); </span><br><span class="line">          Serial.println(lastMillis); </span><br><span class="line">          switchLight(closeLight); <span class="comment">//关灯</span></span><br><span class="line">          lastMillis = <span class="number">0</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">           <span class="comment">//虽然达到关灯要求 但需要 延迟 n 秒</span></span><br><span class="line">           <span class="comment">//继续判断是否有人</span></span><br><span class="line">          <span class="keyword">unsigned</span> <span class="keyword">long</span> check = currentMillis - lastMillis;</span><br><span class="line">          Serial.print(<span class="string">"still have time to turn off:"</span>); </span><br><span class="line">          Serial.println(check); </span><br><span class="line">        &#125;       </span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 0.1秒查看一次</span></span><br><span class="line">  delay(<span class="number">100</span>);       </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//检查光源是否充足</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">detectiveBright</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="comment">// 讀取光敏電阻並輸出到 Serial Port </span></span><br><span class="line">  brightVal = analogRead(brightPin);</span><br><span class="line">  <span class="comment">//Serial.print("detectiveBright -&gt; brightVal: ");</span></span><br><span class="line">  <span class="comment">//Serial.println(brightVal);   </span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 光線不足</span></span><br><span class="line">  <span class="keyword">if</span> (brightVal &lt; minLight)&#123;</span><br><span class="line">    <span class="comment">//brightState = LOW;</span></span><br><span class="line">    <span class="comment">//Serial.print("brightState = LOW; ");</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123; <span class="comment">//光线充足 ok</span></span><br><span class="line">    <span class="comment">//brightState = HIGH;</span></span><br><span class="line">    <span class="comment">//Serial.print("brightState = HIGH; ");</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//检查 160度内 是否有人感应</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">detectivePerson</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> detectiveNum = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">20</span>; i++)&#123;</span><br><span class="line">      personState = digitalRead(infraredPin); </span><br><span class="line">      <span class="keyword">if</span> (HIGH == personState)&#123;</span><br><span class="line">        detectiveNum++;</span><br><span class="line">        delay(<span class="number">5</span>);</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//有人的时候输出高电平1 无人0</span></span><br><span class="line">  Serial.print(<span class="string">"detectivePerson -&gt; detectiveNum: "</span>);</span><br><span class="line">  Serial.println(detectiveNum); </span><br><span class="line">  <span class="comment">// 有人情况超过一半 视为有人</span></span><br><span class="line">  <span class="keyword">if</span> (detectiveNum &gt;= <span class="number">10</span>)&#123;</span><br><span class="line">    Serial.print(<span class="string">"perple on\n"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    Serial.print(<span class="string">"perple off\n"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 开灯 OR 关灯</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">switchLight</span><span class="params">(<span class="keyword">int</span> state)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//读取当前角度</span></span><br><span class="line">  <span class="keyword">int</span> nowState = myservo.read();</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 0 - 180 度</span></span><br><span class="line">  <span class="comment">// 输入对应的角度值，舵机会转到此位置</span></span><br><span class="line">  <span class="keyword">if</span> (state == openLight &amp;&amp; lightOpen != nowState)&#123; <span class="comment">//打开</span></span><br><span class="line">    Serial.print(<span class="string">"open"</span>);</span><br><span class="line">    myservo.write(lightOpen);              </span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">if</span> (state == closeLight &amp;&amp; lightClose != nowState) &#123;  <span class="comment">//关闭</span></span><br><span class="line">    Serial.print(<span class="string">"close"</span>);</span><br><span class="line">    myservo.write(lightClose);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 更新灯状态</span></span><br><span class="line">  lightState = state;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//开或关灯 时 LED显示</span></span><br><span class="line">  digitalWrite(ledPin, lightState); <span class="comment">// turn ON/OFF LED</span></span><br><span class="line"></span><br><span class="line">  Serial.print(<span class="string">"switchLight(): "</span>);</span><br><span class="line">  Serial.println(lightState);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>13号口LED灯仅调试时使用，测试时需拿下LED灯，LED亮会影响光敏判断流程 舵机最好单独供电，人体红外探测范围约160度左右不够时可多加几位人体红外，面板包仅测试时使用，长期使用可能会不稳定</p></blockquote>]]></content>
      
      
        <tags>
            
            <tag> arduino </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>配置 Git 服务</title>
      <link href="/2015/12/31/%E9%85%8D%E7%BD%AE-Git-%E6%9C%8D%E5%8A%A1/"/>
      <url>/2015/12/31/%E9%85%8D%E7%BD%AE-Git-%E6%9C%8D%E5%8A%A1/</url>
      <content type="html"><![CDATA[<blockquote><p>配置 Git 服务，创建 Git 仓库</p></blockquote><h2 id="客户端密钥"><a href="#客户端密钥" class="headerlink" title="客户端密钥"></a>客户端密钥</h2><blockquote><p>每个需要使用 Git 的客户端都需要生成一份密钥, 首先去 ~/.ssh 查看自己是否已经有密钥</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> ~/.ssh/</span><br><span class="line">$ ls</span><br><span class="line">authorized_keys   id_dsa       known_hosts</span><br><span class="line">config            id_dsa.pub</span><br></pre></td></tr></table></figure><blockquote><p>默认命名为 id_dsa / id_rsa 个人文件夹目录 ~/.ssh/</p></blockquote><blockquote><p>其中一个带有 .pub 扩展名， .pub 文件是你的公钥，另一个则是私钥。 如果找不到这样的文件（或者根本没有 .ssh 目录），你可以通过运行 ssh-keygen 程序来创建它们。</p></blockquote><h3 id="生成密钥"><a href="#生成密钥" class="headerlink" title="生成密钥"></a>生成密钥</h3><a id="more"></a><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ ssh-keygen</span><br><span class="line">Generating public/private rsa key pair.</span><br><span class="line">Enter file <span class="keyword">in</span> <span class="built_in">which</span> to save the key (/root/.ssh/id_rsa):  //你可以选择保存文件的位置或者直接回车使用默认位置</span><br><span class="line">Created directory <span class="string">'/root/.ssh'</span>.</span><br><span class="line">Enter passphrase (empty <span class="keyword">for</span> no passphrase):  // 如果不想使用时输入密码 直接按回车</span><br><span class="line">Enter same passphrase again: </span><br><span class="line">Your identification has been saved <span class="keyword">in</span> /root/.ssh/id_rsa.</span><br><span class="line">Your public key has been saved <span class="keyword">in</span> /root/.ssh/id_rsa.pub.</span><br><span class="line">The key fingerprint is:</span><br><span class="line">08:5e:fe:16:c8:e9:4f:65:4d:dd:2d:01:a1:1f:7b:f9</span><br></pre></td></tr></table></figure><blockquote><p>生成了客户端自己的一对密钥于 ~/.ssh/id_rsa</p></blockquote><h2 id="服务端设置"><a href="#服务端设置" class="headerlink" title="服务端设置"></a>服务端设置</h2><h3 id="添加新用户"><a href="#添加新用户" class="headerlink" title="添加新用户"></a>添加新用户</h3><blockquote><p>添加为了 git 的用户来仅创建或修改 Git 仓库相关的内容，禁止该用户登录和其他操作</p></blockquote><h4 id="首先登录-root-用户，创建该用户"><a href="#首先登录-root-用户，创建该用户" class="headerlink" title="首先登录 root 用户，创建该用户"></a>首先登录 root 用户，创建该用户</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo adduser git</span><br></pre></td></tr></table></figure><h4 id="切换至-git-用户"><a href="#切换至-git-用户" class="headerlink" title="切换至 git 用户"></a>切换至 git 用户</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">su git</span><br></pre></td></tr></table></figure><h4 id="创建-authorized-keys-并加入需要使用-Git-仓库客户端的-公钥"><a href="#创建-authorized-keys-并加入需要使用-Git-仓库客户端的-公钥" class="headerlink" title="创建 authorized_keys 并加入需要使用 Git 仓库客户端的 公钥"></a>创建 authorized_keys 并加入需要使用 Git 仓库客户端的 公钥</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> </span><br><span class="line">mkdir .ssh &amp;&amp; chmod 700 .ssh</span><br><span class="line">touch .ssh/authorized_keys &amp;&amp; chmod 600 .ssh/authorized_keys</span><br></pre></td></tr></table></figure><blockquote><p>将我们信任的开发者密钥(即第一步客户端生成的密钥)加入 authorized_keys 中，多个用户可多次添加至 authorized_keys 文件中<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /tmp/zacklee.pub &gt;&gt; ~/.ssh/authorized_keys</span><br></pre></td></tr></table></figure></p></blockquote><h4 id="保证-git-用户安全-仅可使用-Git-服务"><a href="#保证-git-用户安全-仅可使用-Git-服务" class="headerlink" title="保证 git 用户安全 (仅可使用 Git 服务)"></a>保证 git 用户安全 (仅可使用 Git 服务)</h4><blockquote><p>切换回 root 用户，为 git 用户创建密码并禁止 git 用户的活动范围</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">su root</span><br></pre></td></tr></table></figure><blockquote><p>为 git 用户创建密码 (客户端使用 Git 服务时需要使用该密码，或将其他客户端公钥加入服务端实现免密码)</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">passwd git</span><br></pre></td></tr></table></figure><blockquote><p>为了保证 git 用户安全（仅使用 git 服务）借助一个名为 git-shell 的受限 shell 工具，你可以方便地将用户 git 的活动限制在与 Git 相关的范围内。</p></blockquote><p>首先查看 是否有 git-shell，若没有则继续添加<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ cat /etc/shells</span><br><span class="line">/bin/sh</span><br><span class="line">/bin/bash</span><br><span class="line">/sbin/nologin</span><br><span class="line">/bin/zsh</span><br></pre></td></tr></table></figure></p><p>查询 git-shell 所在目录<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">which</span> git-shell</span><br><span class="line">/usr/bin/git-shell</span><br></pre></td></tr></table></figure></p><p>添加 git-shell 目录行余文件尾<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/shells</span><br></pre></td></tr></table></figure></p><blockquote><p>加入 git-shell 所在目录 /usr/bin/git-shell 至 /etc/shells 文件尾</p></blockquote><p>修改用户的 shell</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo chsh git /usr/bin/git-shell <span class="comment"># git-shell 路径</span></span><br></pre></td></tr></table></figure><blockquote><p>这样，git 用户就只能利用 SSH 连接对 Git 仓库进行推送和拉取操作，而不能登录机器并取得普通 shell。 如果试图登录，你会发现尝试被拒绝。</p></blockquote><h3 id="创建新仓库"><a href="#创建新仓库" class="headerlink" title="创建新仓库"></a>创建新仓库</h3><blockquote><p>使用 root (或非 git 用户) 登录并创建新仓库，这里我们将所有 Git 仓库放置于 /opt/git/ 文件夹下，创建名为 project.git 的 Git 仓库并初始化一个空仓库</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> /opt/git</span><br><span class="line">$ mkdir project.git</span><br><span class="line">$ <span class="built_in">cd</span> project.git</span><br><span class="line">git init --bare</span><br><span class="line">Initialized empty Git repository <span class="keyword">in</span> /opt/git/project.git/</span><br></pre></td></tr></table></figure><blockquote><p>为 git 用户创建修改本仓库的相关权限</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo chown -R git:git /opt/git/project.git</span><br></pre></td></tr></table></figure><h2 id="客户端初始化-Git-仓库"><a href="#客户端初始化-Git-仓库" class="headerlink" title="客户端初始化 Git 仓库"></a>客户端初始化 Git 仓库</h2><blockquote><p>所有信任的客户端都应先将公钥添加至服务端，即使我们已经为 Git 服务单独创建名为 git 的用户，我们也应该保证尽量不暴露 git 用户的密码</p></blockquote><blockquote><p>创建项目文件夹 myproject，初始化并提交至 project.git<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> myproject</span><br><span class="line">git init</span><br><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">'initial commit'</span></span><br><span class="line">git remote add origin git@服务端地址:/opt/git/project.git</span><br><span class="line">git push origin master <span class="comment">#推送代码至 master</span></span><br></pre></td></tr></table></figure></p></blockquote><h2 id="Clone-并参与项目"><a href="#Clone-并参与项目" class="headerlink" title="Clone 并参与项目"></a>Clone 并参与项目</h2><blockquote><p>其他客户端参与项目，Clone project.git 并提交新代码</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> git@服务端地址:/opt/git/project.git</span><br><span class="line"><span class="built_in">cd</span> project</span><br><span class="line">cat <span class="string">"readme"</span> &gt; README</span><br><span class="line">git add README</span><br><span class="line">git commit -m <span class="string">'fix for the README file'</span></span><br><span class="line">git push origin master</span><br></pre></td></tr></table></figure>]]></content>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>VIM 配置</title>
      <link href="/2015/12/11/VIM-%E9%85%8D%E7%BD%AE/"/>
      <url>/2015/12/11/VIM-%E9%85%8D%E7%BD%AE/</url>
      <content type="html"><![CDATA[<blockquote><p>VIM 7.4 以上版本，大部分配置同时适用于 Linux / Mac OS 终端 以及 gVim</p></blockquote><h2 id="安装插件管理器"><a href="#安装插件管理器" class="headerlink" title="安装插件管理器"></a>安装插件管理器</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/gmarik/vundle.git ~/.vim/bundle/vundle</span><br></pre></td></tr></table></figure><h2 id="完整配置"><a href="#完整配置" class="headerlink" title="完整配置"></a>完整配置</h2><blockquote><p>编辑本用户的 vim 配置文件<br>Linux / Mac OS 一般创建文件 ~/.vimrc<br>Windows 可在用户名文件夹下创建 .vimrc 文件 (C:\Users\USERNAME)</p></blockquote><a id="more"></a><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br><span class="line">808</span><br><span class="line">809</span><br><span class="line">810</span><br><span class="line">811</span><br><span class="line">812</span><br><span class="line">813</span><br><span class="line">814</span><br><span class="line">815</span><br><span class="line">816</span><br><span class="line">817</span><br><span class="line">818</span><br><span class="line">819</span><br><span class="line">820</span><br><span class="line">821</span><br><span class="line">822</span><br><span class="line">823</span><br><span class="line">824</span><br><span class="line">825</span><br><span class="line">826</span><br><span class="line">827</span><br><span class="line">828</span><br><span class="line">829</span><br><span class="line">830</span><br><span class="line">831</span><br><span class="line">832</span><br><span class="line">833</span><br><span class="line">834</span><br><span class="line">835</span><br><span class="line">836</span><br><span class="line">837</span><br><span class="line">838</span><br><span class="line">839</span><br><span class="line">840</span><br><span class="line">841</span><br><span class="line">842</span><br><span class="line">843</span><br><span class="line">844</span><br><span class="line">845</span><br><span class="line">846</span><br><span class="line">847</span><br><span class="line">848</span><br><span class="line">849</span><br><span class="line">850</span><br><span class="line">851</span><br><span class="line">852</span><br><span class="line">853</span><br><span class="line">854</span><br><span class="line">855</span><br><span class="line">856</span><br><span class="line">857</span><br><span class="line">858</span><br><span class="line">859</span><br><span class="line">860</span><br><span class="line">861</span><br><span class="line">862</span><br><span class="line">863</span><br><span class="line">864</span><br><span class="line">865</span><br><span class="line">866</span><br><span class="line">867</span><br><span class="line">868</span><br><span class="line">869</span><br><span class="line">870</span><br><span class="line">871</span><br><span class="line">872</span><br><span class="line">873</span><br><span class="line">874</span><br><span class="line">875</span><br><span class="line">876</span><br><span class="line">877</span><br><span class="line">878</span><br><span class="line">879</span><br><span class="line">880</span><br><span class="line">881</span><br><span class="line">882</span><br><span class="line">883</span><br><span class="line">884</span><br><span class="line">885</span><br><span class="line">886</span><br><span class="line">887</span><br><span class="line">888</span><br><span class="line">889</span><br><span class="line">890</span><br><span class="line">891</span><br><span class="line">892</span><br><span class="line">893</span><br><span class="line">894</span><br><span class="line">895</span><br><span class="line">896</span><br><span class="line">897</span><br><span class="line">898</span><br><span class="line">899</span><br><span class="line">900</span><br><span class="line">901</span><br><span class="line">902</span><br><span class="line">903</span><br><span class="line">904</span><br><span class="line">905</span><br><span class="line">906</span><br><span class="line">907</span><br><span class="line">908</span><br><span class="line">909</span><br><span class="line">910</span><br><span class="line">911</span><br><span class="line">912</span><br><span class="line">913</span><br><span class="line">914</span><br><span class="line">915</span><br><span class="line">916</span><br><span class="line">917</span><br><span class="line">918</span><br><span class="line">919</span><br><span class="line">920</span><br><span class="line">921</span><br><span class="line">922</span><br><span class="line">923</span><br><span class="line">924</span><br><span class="line">925</span><br><span class="line">926</span><br><span class="line">927</span><br><span class="line">928</span><br><span class="line">929</span><br><span class="line">930</span><br><span class="line">931</span><br><span class="line">932</span><br><span class="line">933</span><br><span class="line">934</span><br><span class="line">935</span><br><span class="line">936</span><br><span class="line">937</span><br><span class="line">938</span><br><span class="line">939</span><br><span class="line">940</span><br><span class="line">941</span><br><span class="line">942</span><br><span class="line">943</span><br><span class="line">944</span><br><span class="line">945</span><br><span class="line">946</span><br><span class="line">947</span><br><span class="line">948</span><br><span class="line">949</span><br><span class="line">950</span><br><span class="line">951</span><br><span class="line">952</span><br><span class="line">953</span><br><span class="line">954</span><br><span class="line">955</span><br><span class="line">956</span><br><span class="line">957</span><br><span class="line">958</span><br><span class="line">959</span><br><span class="line">960</span><br><span class="line">961</span><br><span class="line">962</span><br><span class="line">963</span><br><span class="line">964</span><br><span class="line">965</span><br><span class="line">966</span><br><span class="line">967</span><br><span class="line">968</span><br><span class="line">969</span><br><span class="line">970</span><br><span class="line">971</span><br><span class="line">972</span><br><span class="line">973</span><br><span class="line">974</span><br><span class="line">975</span><br><span class="line">976</span><br><span class="line">977</span><br><span class="line">978</span><br><span class="line">979</span><br><span class="line">980</span><br><span class="line">981</span><br><span class="line">982</span><br><span class="line">983</span><br><span class="line">984</span><br><span class="line">985</span><br><span class="line">986</span><br><span class="line">987</span><br><span class="line">988</span><br><span class="line">989</span><br><span class="line">990</span><br><span class="line">991</span><br><span class="line">992</span><br><span class="line">993</span><br><span class="line">994</span><br><span class="line">995</span><br><span class="line">996</span><br><span class="line">997</span><br><span class="line">998</span><br><span class="line">999</span><br><span class="line">1000</span><br><span class="line">1001</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">" =============================================================================</span></span><br><span class="line"><span class="string">"</span>        &lt;&lt; 判断操作系统是 Windows 还是 Linux 和判断是终端还是 Gvim &gt;&gt;</span><br><span class="line"><span class="string">" =============================================================================</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">"</span> -----------------------------------------------------------------------------</span><br><span class="line"><span class="string">"  &lt; 判断操作系统是否是 Windows 还是 Linux &gt;</span></span><br><span class="line"><span class="string">"</span> -----------------------------------------------------------------------------</span><br><span class="line"><span class="built_in">let</span> g:iswindows = 0</span><br><span class="line"><span class="built_in">let</span> g:islinux = 0</span><br><span class="line"><span class="keyword">if</span>(has(<span class="string">"win32"</span>) || has(<span class="string">"win64"</span>) || has(<span class="string">"win95"</span>) || has(<span class="string">"win16"</span>))</span><br><span class="line">    <span class="built_in">let</span> g:iswindows = 1</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">let</span> g:islinux = 1</span><br><span class="line">endif</span><br><span class="line"></span><br><span class="line"><span class="string">" -----------------------------------------------------------------------------</span></span><br><span class="line"><span class="string">"</span>  &lt; 判断是终端还是 Gvim &gt;</span><br><span class="line"><span class="string">" -----------------------------------------------------------------------------</span></span><br><span class="line"><span class="string">if has("</span>gui_running<span class="string">")</span></span><br><span class="line"><span class="string">    let g:isGUI = 1</span></span><br><span class="line"><span class="string">else</span></span><br><span class="line"><span class="string">    let g:isGUI = 0</span></span><br><span class="line"><span class="string">endif</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">"</span> =============================================================================</span><br><span class="line"><span class="string">"                          &lt;&lt; 以下为软件默认配置 &gt;&gt;</span></span><br><span class="line"><span class="string">"</span> =============================================================================</span><br><span class="line"></span><br><span class="line"><span class="string">" -----------------------------------------------------------------------------</span></span><br><span class="line"><span class="string">"</span>  &lt; Windows Gvim 默认配置&gt; 做了一点修改</span><br><span class="line"><span class="string">" -----------------------------------------------------------------------------</span></span><br><span class="line"><span class="string">if (g:iswindows &amp;&amp; g:isGUI)</span></span><br><span class="line"><span class="string">    source <span class="variable">$VIMRUNTIME</span>/vimrc_example.vim</span></span><br><span class="line"><span class="string">    source <span class="variable">$VIMRUNTIME</span>/mswin.vim</span></span><br><span class="line"><span class="string">    behave mswin</span></span><br><span class="line"><span class="string">    set diffexpr=MyDiff()</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    function MyDiff()</span></span><br><span class="line"><span class="string">        let opt = '-a --binary '</span></span><br><span class="line"><span class="string">        if &amp;diffopt =~ 'icase' | let opt = opt . '-i ' | endif</span></span><br><span class="line"><span class="string">        if &amp;diffopt =~ 'iwhite' | let opt = opt . '-b ' | endif</span></span><br><span class="line"><span class="string">        let arg1 = v:fname_in</span></span><br><span class="line"><span class="string">        if arg1 =~ ' ' | let arg1 = '"</span><span class="string">' . arg1 . '</span><span class="string">"' | endif</span></span><br><span class="line"><span class="string">        let arg2 = v:fname_new</span></span><br><span class="line"><span class="string">        if arg2 =~ ' ' | let arg2 = '"</span><span class="string">' . arg2 . '</span><span class="string">"' | endif</span></span><br><span class="line"><span class="string">        let arg3 = v:fname_out</span></span><br><span class="line"><span class="string">        if arg3 =~ ' ' | let arg3 = '"</span><span class="string">' . arg3 . '</span><span class="string">"' | endif</span></span><br><span class="line"><span class="string">        let eq = ''</span></span><br><span class="line"><span class="string">        if <span class="variable">$VIMRUNTIME</span> =~ ' '</span></span><br><span class="line"><span class="string">            if &amp;sh =~ '\&lt;cmd'</span></span><br><span class="line"><span class="string">                let cmd = '"</span><span class="string">"' . <span class="variable">$VIMRUNTIME</span> . '\diff"</span><span class="string">'</span></span><br><span class="line"><span class="string">                let eq = '</span><span class="string">"'</span></span><br><span class="line"><span class="string">            else</span></span><br><span class="line"><span class="string">                let cmd = substitute(<span class="variable">$VIMRUNTIME</span>, ' ', '"</span> <span class="string">', '</span><span class="string">') . '</span>\diff<span class="string">"'</span></span><br><span class="line"><span class="string">            endif</span></span><br><span class="line"><span class="string">        else</span></span><br><span class="line"><span class="string">            let cmd = <span class="variable">$VIMRUNTIME</span> . '\diff'</span></span><br><span class="line"><span class="string">        endif</span></span><br><span class="line"><span class="string">        silent execute '!' . cmd . ' ' . opt . arg1 . ' ' . arg2 . ' &gt; ' . arg3 . eq</span></span><br><span class="line"><span class="string">    endfunction</span></span><br><span class="line"><span class="string">endif</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">"</span> -----------------------------------------------------------------------------</span><br><span class="line"><span class="string">"  &lt; Linux Gvim/Vim 默认配置&gt; 做了一点修改</span></span><br><span class="line"><span class="string">"</span> -----------------------------------------------------------------------------</span><br><span class="line"><span class="keyword">if</span> g:islinux</span><br><span class="line">    <span class="built_in">set</span> hlsearch        <span class="string">"高亮搜索</span></span><br><span class="line"><span class="string">    set incsearch       "</span>在输入要搜索的文字时，实时匹配</span><br><span class="line"></span><br><span class="line">    <span class="string">" Uncomment the following to have Vim jump to the last position when</span></span><br><span class="line"><span class="string">    "</span> reopening a file</span><br><span class="line">    <span class="keyword">if</span> has(<span class="string">"autocmd"</span>)</span><br><span class="line">        au BufReadPost * <span class="keyword">if</span> line(<span class="string">"'\""</span>) &gt; 1 &amp;&amp; line(<span class="string">"'\""</span>) &lt;= line(<span class="string">"$"</span>) | exe <span class="string">"normal! g'\""</span> | endif</span><br><span class="line">    endif</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> g:isGUI</span><br><span class="line">        <span class="string">" Source a global configuration file if available</span></span><br><span class="line"><span class="string">        if filereadable("</span>/etc/vim/gvimrc.local<span class="string">")</span></span><br><span class="line"><span class="string">            source /etc/vim/gvimrc.local</span></span><br><span class="line"><span class="string">        endif</span></span><br><span class="line"><span class="string">    else</span></span><br><span class="line"><span class="string">        "</span> This line should not be removed as it ensures that various options are</span><br><span class="line">        <span class="string">" properly set to work with the Vim-related packages available in Debian.</span></span><br><span class="line"><span class="string">        runtime! debian.vim</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        "</span> Vim5 and later versions support syntax highlighting. Uncommenting the next</span><br><span class="line">        <span class="string">" line enables syntax highlighting by default.</span></span><br><span class="line"><span class="string">        if has("</span>syntax<span class="string">")</span></span><br><span class="line"><span class="string">            syntax on</span></span><br><span class="line"><span class="string">        endif</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        "</span> <span class="built_in">set</span> mouse=a                    <span class="string">" 在任何模式下启用鼠标</span></span><br><span class="line"><span class="string">        set t_Co=256                   "</span> 在终端启用256色</span><br><span class="line">        <span class="built_in">set</span> backspace=2                <span class="string">" 设置退格键可用</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        "</span> Source a global configuration file <span class="keyword">if</span> available</span><br><span class="line">        <span class="keyword">if</span> filereadable(<span class="string">"/etc/vim/vimrc.local"</span>)</span><br><span class="line">            <span class="built_in">source</span> /etc/vim/vimrc.local</span><br><span class="line">        endif</span><br><span class="line">    endif</span><br><span class="line">endif</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="string">" =============================================================================</span></span><br><span class="line"><span class="string">"</span>                          &lt;&lt; 以下为用户自定义配置 &gt;&gt;</span><br><span class="line"><span class="string">" =============================================================================</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">"</span> -----------------------------------------------------------------------------</span><br><span class="line"><span class="string">"  &lt; Vundle 插件管理工具配置 &gt;</span></span><br><span class="line"><span class="string">"</span> -----------------------------------------------------------------------------</span><br><span class="line"><span class="string">" 用于更方便的管理vim插件，具体用法参考 :h vundle 帮助</span></span><br><span class="line"><span class="string">"</span> Vundle工具安装方法为在终端输入如下命令</span><br><span class="line"><span class="string">" git clone https://github.com/gmarik/vundle.git ~/.vim/bundle/vundle</span></span><br><span class="line"><span class="string">"</span> 如果想在 windows 安装就必需先安装 <span class="string">"git for window"</span>，可查阅网上资料</span><br><span class="line"></span><br><span class="line"><span class="built_in">set</span> nocompatible                                      <span class="string">"禁用 Vi 兼容模式</span></span><br><span class="line"><span class="string">filetype off                                          "</span>禁用文件类型侦测</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> g:islinux</span><br><span class="line">    <span class="built_in">set</span> rtp+=~/.vim/bundle/vundle/</span><br><span class="line">    call vundle<span class="comment">#rc()</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">set</span> rtp+=<span class="variable">$VIM</span>/vimfiles/bundle/vundle/</span><br><span class="line">    call vundle<span class="comment">#rc('$VIM/vimfiles/bundle/')</span></span><br><span class="line">endif</span><br><span class="line"></span><br><span class="line"><span class="string">" 使用Vundle来管理插件，这个必须要有。</span></span><br><span class="line"><span class="string">Bundle 'gmarik/vundle'</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">"</span> 以下为要安装或更新的插件，不同仓库都有（具体书写规范请参考帮助）</span><br><span class="line"><span class="string">" -----------------------------------------------------------------------------</span></span><br><span class="line"><span class="string">"</span>  &lt; a.vim 插件配置 &gt;</span><br><span class="line"><span class="string">" -----------------------------------------------------------------------------</span></span><br><span class="line"><span class="string">"</span> :AS    ---切换头文件并水平分割窗口</span><br><span class="line"><span class="string">" Bundle 'a.vim'</span></span><br><span class="line"><span class="string">"</span> -----------------------------------------------------------------------------</span><br><span class="line"><span class="string">"  &lt; Align 插件配置 &gt;</span></span><br><span class="line"><span class="string">"</span> -----------------------------------------------------------------------------</span><br><span class="line"><span class="string">" 一个对齐的插件，用来——排版与对齐代码，功能强大，不过用到的机会不多</span></span><br><span class="line"><span class="string">Bundle 'Align'</span></span><br><span class="line"><span class="string">"</span> -----------------------------------------------------------------------------</span><br><span class="line"><span class="string">"  &lt; tab 键自动补全 &gt;</span></span><br><span class="line"><span class="string">"</span> -----------------------------------------------------------------------------</span><br><span class="line"><span class="string">" Bundle 'SuperTab'</span></span><br><span class="line"><span class="string">"</span> -----------------------------------------------------------------------------</span><br><span class="line"><span class="string">"  &lt; auto-pairs 插件配置 &gt;</span></span><br><span class="line"><span class="string">"</span> -----------------------------------------------------------------------------</span><br><span class="line"><span class="string">" 用于括号与引号自动补全，不过会与函数原型提示插件echofunc冲突</span></span><br><span class="line"><span class="string">Bundle 'jiangmiao/auto-pairs'</span></span><br><span class="line"><span class="string">"</span> -----------------------------------------------------------------------------</span><br><span class="line"><span class="string">"  &lt; BufExplorer 插件配置 &gt;</span></span><br><span class="line"><span class="string">"</span> -----------------------------------------------------------------------------</span><br><span class="line"><span class="string">" 快速轻松的在缓存中切换（相当于另一种多个文件间的切换方式）</span></span><br><span class="line"><span class="string">Bundle 'bufexplorer.zip'</span></span><br><span class="line"><span class="string">"</span> -----------------------------------------------------------------------------</span><br><span class="line"><span class="string">"  &lt; ccvext.vim 插件配置 &gt;</span></span><br><span class="line"><span class="string">"</span> -----------------------------------------------------------------------------</span><br><span class="line"><span class="string">" 用于对指定文件自动生成tags与cscope文件并连接</span></span><br><span class="line"><span class="string">"</span> Bundle <span class="string">'ccvext.vim'</span></span><br><span class="line"><span class="string">" -----------------------------------------------------------------------------</span></span><br><span class="line"><span class="string">"</span>  &lt; cSyntaxAfter 插件配置 &gt;</span><br><span class="line"><span class="string">" -----------------------------------------------------------------------------</span></span><br><span class="line"><span class="string">"</span> 高亮括号与运算符等</span><br><span class="line">Bundle <span class="string">'cSyntaxAfter'</span></span><br><span class="line"><span class="string">" -----------------------------------------------------------------------------</span></span><br><span class="line"><span class="string">"</span>  &lt; ctrlp.vim 插件配置 &gt;</span><br><span class="line"><span class="string">" -----------------------------------------------------------------------------</span></span><br><span class="line"><span class="string">"</span> 一个全路径模糊文件，缓冲区，最近最多使用，... 检索插件；详细帮助见 :h ctrlp</span><br><span class="line"><span class="string">" 常规模式下输入：Ctrl + p 调用插件</span></span><br><span class="line"><span class="string">Bundle 'ctrlpvim/ctrlp.vim'</span></span><br><span class="line"><span class="string">"</span> -----------------------------------------------------------------------------</span><br><span class="line"><span class="string">"  &lt; emmet-vim（前身为Zen coding） 插件配置 &gt;</span></span><br><span class="line"><span class="string">"</span> -----------------------------------------------------------------------------</span><br><span class="line"><span class="string">" HTML/CSS代码快速编写神器，详细帮助见 :h emmet.txt</span></span><br><span class="line"><span class="string">Bundle 'mattn/emmet-vim'</span></span><br><span class="line"><span class="string">"</span> -----------------------------------------------------------------------------</span><br><span class="line"><span class="string">"  &lt; indentLine 插件配置 &gt;</span></span><br><span class="line"><span class="string">"</span> -----------------------------------------------------------------------------</span><br><span class="line"><span class="string">" 用于显示对齐线，与 indent_guides 在显示方式上不同，根据自己喜好选择了</span></span><br><span class="line"><span class="string">"</span> 在终端上会有屏幕刷新的问题，这个问题能解决有更好了</span><br><span class="line">Bundle <span class="string">'Yggdroot/indentLine'</span></span><br><span class="line"><span class="string">" -----------------------------------------------------------------------------</span></span><br><span class="line"><span class="string">"</span>  &lt; vim-javacompleteex（也就是 javacomplete 增强版）插件配置 &gt;</span><br><span class="line"><span class="string">" -----------------------------------------------------------------------------</span></span><br><span class="line"><span class="string">"</span> java 补全插件</span><br><span class="line"><span class="string">" Bundle 'vim-javacompleteex'</span></span><br><span class="line"><span class="string">"</span> -----------------------------------------------------------------------------</span><br><span class="line"><span class="string">"  &lt; Mark--Karkat（也就是 Mark） 插件配置 &gt;</span></span><br><span class="line"><span class="string">"</span> -----------------------------------------------------------------------------</span><br><span class="line"><span class="string">" 给不同的单词高亮，表明不同的变量时很有用，详细帮助见 :h mark.txt</span></span><br><span class="line"><span class="string">Bundle 'Mark--Karkat'</span></span><br><span class="line"><span class="string">"</span> -----------------------------------------------------------------------------</span><br><span class="line"><span class="string">"  &lt; neocomplcache 插件配置 &gt;</span></span><br><span class="line"><span class="string">"</span> -----------------------------------------------------------------------------</span><br><span class="line"><span class="string">" 关键字补全、文件路径补全、tag补全等等，各种，非常好用，速度超快。</span></span><br><span class="line"><span class="string">Bundle 'Shougo/neocomplcache.vim'</span></span><br><span class="line"><span class="string">"</span> -----------------------------------------------------------------------------</span><br><span class="line"><span class="string">"  &lt; nerdcommenter 插件配置 &gt;</span></span><br><span class="line"><span class="string">"</span> -----------------------------------------------------------------------------</span><br><span class="line"><span class="string">" 我主要用于C/C++代码注释(其它的也行)</span></span><br><span class="line"><span class="string">"</span> 以下为插件默认快捷键，其中的说明是以C/C++为例的，其它语言类似</span><br><span class="line">Bundle <span class="string">'scrooloose/nerdcommenter'</span></span><br><span class="line"><span class="string">" -----------------------------------------------------------------------------</span></span><br><span class="line"><span class="string">"</span>  &lt; nerdtree 插件配置 &gt;</span><br><span class="line"><span class="string">" -----------------------------------------------------------------------------</span></span><br><span class="line"><span class="string">"</span> 有目录村结构的文件浏览插件</span><br><span class="line"></span><br><span class="line"><span class="string">" 常规模式下输入 F2 调用插件</span></span><br><span class="line"><span class="string">Bundle 'scrooloose/nerdtree'</span></span><br><span class="line"><span class="string">"</span> -----------------------------------------------------------------------------</span><br><span class="line"><span class="string">"  &lt; omnicppcomplete 插件配置 &gt;</span></span><br><span class="line"><span class="string">"</span> -----------------------------------------------------------------------------</span><br><span class="line"><span class="string">" 用于C/C++代码补全，这种补全主要针对命名空间、类、结构、共同体等进行补全，详细</span></span><br><span class="line"><span class="string">"</span> 说明可以参考帮助或网络教程等</span><br><span class="line"><span class="string">" 使用前先执行如下 ctags 命令（本配置中可以直接使用 ccvext 插件来执行以下命令）</span></span><br><span class="line"><span class="string">"</span> ctags -R --c++-kinds=+p --fields=+iaS --extra=+q</span><br><span class="line"><span class="string">" 我使用上面的参数生成标签后，对函数使用跳转时会出现多个选择</span></span><br><span class="line"><span class="string">"</span> Bundle <span class="string">'OmniCppComplete'</span></span><br><span class="line"><span class="string">" -----------------------------------------------------------------------------</span></span><br><span class="line"><span class="string">"</span>  &lt; powerline 插件配置 &gt;</span><br><span class="line"><span class="string">" -----------------------------------------------------------------------------</span></span><br><span class="line"><span class="string">"</span> 状态栏插件，更好的状态栏效果</span><br><span class="line">Bundle <span class="string">'Lokaltog/vim-powerline'</span></span><br><span class="line"><span class="string">" -----------------------------------------------------------------------------</span></span><br><span class="line"><span class="string">"</span>  &lt; repeat 插件配置 &gt;</span><br><span class="line"><span class="string">" -----------------------------------------------------------------------------</span></span><br><span class="line"><span class="string">"</span> 主要用<span class="string">"."</span>命令来重复上次插件使用的命令</span><br><span class="line">Bundle <span class="string">'repeat.vim'</span></span><br><span class="line"><span class="string">" -----------------------------------------------------------------------------</span></span><br><span class="line"><span class="string">"</span>  &lt; snipMate 插件配置 &gt;</span><br><span class="line"><span class="string">" -----------------------------------------------------------------------------</span></span><br><span class="line"><span class="string">"</span> 用于各种代码补全，这种补全是一种对代码中的词与代码块的缩写补全，详细用法可以参</span><br><span class="line"><span class="string">" 考使用说明或网络教程等。不过有时候也会与 supertab 插件在补全时产生冲突，如果大</span></span><br><span class="line"><span class="string">"</span> 侠有什么其它解决方法希望不要保留呀</span><br><span class="line">Bundle <span class="string">'msanders/snipmate.vim'</span></span><br><span class="line"><span class="string">" -----------------------------------------------------------------------------</span></span><br><span class="line"><span class="string">"</span>  &lt; SrcExpl 插件配置 &gt;</span><br><span class="line"><span class="string">" -----------------------------------------------------------------------------</span></span><br><span class="line"><span class="string">"</span> 增强源代码浏览，其功能就像Windows中的<span class="string">"Source Insight"</span></span><br><span class="line">Bundle <span class="string">'wesleyche/SrcExpl'</span></span><br><span class="line"><span class="string">" -----------------------------------------------------------------------------</span></span><br><span class="line"><span class="string">"</span>  &lt; std_c 插件配置 &gt;</span><br><span class="line"><span class="string">" -----------------------------------------------------------------------------</span></span><br><span class="line"><span class="string">"</span> Bundle <span class="string">'std_c.zip'</span></span><br><span class="line"><span class="string">" -----------------------------------------------------------------------------</span></span><br><span class="line"><span class="string">"</span>  &lt; surround 插件配置 &gt;</span><br><span class="line"><span class="string">" -----------------------------------------------------------------------------</span></span><br><span class="line"><span class="string">"</span> 快速给单词/句子两边增加符号（包括html标签），缺点是不能用<span class="string">"."</span>来重复命令</span><br><span class="line"><span class="string">" 不过 repeat 插件可以解决这个问题，详细帮助见 :h surround.txt</span></span><br><span class="line"><span class="string">Bundle 'tpope/vim-surround'</span></span><br><span class="line"><span class="string">"</span> -----------------------------------------------------------------------------</span><br><span class="line"><span class="string">"  &lt; Syntastic 插件配置 &gt;</span></span><br><span class="line"><span class="string">"</span> -----------------------------------------------------------------------------</span><br><span class="line"><span class="string">" 用于保存文件时查检语法</span></span><br><span class="line"><span class="string">Bundle 'scrooloose/syntastic'</span></span><br><span class="line"><span class="string">"</span> -----------------------------------------------------------------------------</span><br><span class="line"><span class="string">"  &lt; Tagbar 插件配置 &gt;</span></span><br><span class="line"><span class="string">"</span> -----------------------------------------------------------------------------</span><br><span class="line"><span class="string">" 相对 TagList 能更好的支持面向对象</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">"</span> 常规模式下输入 tb 调用插件，如果有打开 TagList 窗口则先将其关闭</span><br><span class="line">Bundle <span class="string">'majutsushi/tagbar'</span></span><br><span class="line"><span class="string">" -----------------------------------------------------------------------------</span></span><br><span class="line"><span class="string">"</span>  &lt; TagList 插件配置 &gt;</span><br><span class="line"><span class="string">" -----------------------------------------------------------------------------</span></span><br><span class="line"><span class="string">"</span> 高效地浏览源码, 其功能就像vc中的workpace</span><br><span class="line"><span class="string">" 那里面列出了当前文件中的所有宏,全局变量, 函数名等</span></span><br><span class="line"><span class="string">"</span> 常规模式下输入 tl 调用插件，如果有打开 Tagbar 窗口则先将其关闭</span><br><span class="line">Bundle <span class="string">'taglist.vim'</span></span><br><span class="line"><span class="string">" -----------------------------------------------------------------------------</span></span><br><span class="line"><span class="string">"</span>  &lt; txtbrowser 插件配置 &gt;</span><br><span class="line"><span class="string">" -----------------------------------------------------------------------------</span></span><br><span class="line"><span class="string">"</span> 用于文本文件生成标签与与语法高亮（调用TagList插件生成标签，如果可以）</span><br><span class="line">Bundle <span class="string">'TxtBrowser'</span></span><br><span class="line"><span class="string">" -----------------------------------------------------------------------------</span></span><br><span class="line"><span class="string">"</span>  &lt; ZoomWin 插件配置 &gt;</span><br><span class="line"><span class="string">" -----------------------------------------------------------------------------</span></span><br><span class="line"><span class="string">"</span> 用于分割窗口的最大化与还原</span><br><span class="line"><span class="string">" 常规模式下按快捷键 &lt;c-w&gt;o 在最大化与还原间切换</span></span><br><span class="line"><span class="string">Bundle 'ZoomWin'</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">"</span> Go 语法高亮 https://github.com/fatih/vim-go </span><br><span class="line">Bundle <span class="string">'fatih/vim-go'</span></span><br><span class="line"></span><br><span class="line"><span class="string">" Go 语法检查</span></span><br><span class="line"><span class="string">Bundle 'rjohnsondev/vim-compiler-go'</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">"</span> PHP DOC MAC ONLY</span><br><span class="line">Bundle <span class="string">'rizzatti/dash.vim'</span></span><br><span class="line"></span><br><span class="line"><span class="string">" 全文搜索（项目） 函数名</span></span><br><span class="line"><span class="string">"</span> 需要先安装 ack </span><br><span class="line"><span class="string">" yum install ack</span></span><br><span class="line"><span class="string">Bundle 'mileszs/ack.vim'</span></span><br><span class="line"><span class="string">Bundle 'dyng/ctrlsf.vim'</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">"</span> 全局搜索 leader - t 开启</span><br><span class="line">Bundle <span class="string">'wincent/command-t'</span></span><br><span class="line"></span><br><span class="line"><span class="string">" coffee-script compile</span></span><br><span class="line"><span class="string">Bundle 'kchmck/vim-coffee-script'</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">"</span> -----------------------------------------------------------------------------</span><br><span class="line"><span class="string">"  &lt; 编码配置 &gt;</span></span><br><span class="line"><span class="string">"</span> -----------------------------------------------------------------------------</span><br><span class="line"><span class="string">" 注：使用utf-8格式后，软件与程序源码、文件路径不能有中文，否则报错</span></span><br><span class="line"><span class="string">set encoding=utf-8                                    "</span>设置gvim内部编码，默认不更改</span><br><span class="line"><span class="built_in">set</span> fileencoding=utf-8                                <span class="string">"设置当前文件编码，可以更改，如：gbk（同cp936）</span></span><br><span class="line"><span class="string">set fileencodings=ucs-bom,utf-8,gbk,cp936,latin-1     "</span>设置支持打开的文件的编码</span><br><span class="line"></span><br><span class="line"><span class="string">" 文件格式，默认 ffs=dos,unix</span></span><br><span class="line"><span class="string">set fileformat=unix                                   "</span>设置新（当前）文件的&lt;EOL&gt;格式，可以更改，如：dos（windows系统常用）</span><br><span class="line"><span class="built_in">set</span> fileformats=unix,dos,mac                          <span class="string">"给出文件的&lt;EOL&gt;格式类型</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">if (g:iswindows &amp;&amp; g:isGUI)</span></span><br><span class="line"><span class="string">    "</span>解决菜单乱码</span><br><span class="line">    <span class="built_in">source</span> <span class="variable">$VIMRUNTIME</span>/delmenu.vim</span><br><span class="line">    <span class="built_in">source</span> <span class="variable">$VIMRUNTIME</span>/menu.vim</span><br><span class="line"></span><br><span class="line">    <span class="string">"解决consle输出乱码</span></span><br><span class="line"><span class="string">    language messages zh_CN.utf-8</span></span><br><span class="line"><span class="string">endif</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">"</span> -----------------------------------------------------------------------------</span><br><span class="line"><span class="string">"  &lt; 编写文件时的配置 &gt;</span></span><br><span class="line"><span class="string">"</span> -----------------------------------------------------------------------------</span><br><span class="line">filetype on                                           <span class="string">"启用文件类型侦测</span></span><br><span class="line"><span class="string">filetype plugin on                                    "</span>针对不同的文件类型加载对应的插件</span><br><span class="line">filetype plugin indent on                             <span class="string">"启用缩进</span></span><br><span class="line"><span class="string">set smartindent                                       "</span>启用智能对齐方式</span><br><span class="line"><span class="built_in">set</span> expandtab                                         <span class="string">"将Tab键转换为空格</span></span><br><span class="line"><span class="string">set tabstop=4                                         "</span>设置Tab键的宽度，可以更改，如：宽度为2</span><br><span class="line"><span class="built_in">set</span> shiftwidth=4                                      <span class="string">"换行时自动缩进宽度，可更改（宽度同tabstop）</span></span><br><span class="line"><span class="string">set smarttab                                          "</span>指定按一次backspace就删除shiftwidth宽度</span><br><span class="line"><span class="string">" set foldenable                                        "</span>启用折叠</span><br><span class="line"><span class="string">" set foldmethod=indent                                 "</span>indent 折叠方式</span><br><span class="line"><span class="string">" set foldmethod=marker                                "</span>marker 折叠方式</span><br><span class="line"></span><br><span class="line"><span class="string">" 常规模式下用空格键来开关光标行所在折叠（注：zR 展开所有折叠，zM 关闭所有折叠）</span></span><br><span class="line"><span class="string">nnoremap &lt;space&gt; @=((foldclosed(line('.')) &lt; 0) ? 'zc' : 'zo')&lt;CR&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">"</span> 当文件在外部被修改，自动更新该文件</span><br><span class="line"><span class="built_in">set</span> autoread</span><br><span class="line"></span><br><span class="line"><span class="string">" 常规模式下输入 cS 清除行尾空格</span></span><br><span class="line"><span class="string">nmap cS :%s/\s\+$//g&lt;CR&gt;:noh&lt;CR&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">"</span> 常规模式下输入 cM 清除行尾 ^M 符号</span><br><span class="line">nmap cM :%s/\r$//g&lt;CR&gt;:noh&lt;CR&gt;</span><br><span class="line"></span><br><span class="line"><span class="built_in">set</span> ignorecase                                        <span class="string">"搜索模式里忽略大小写</span></span><br><span class="line"><span class="string">"</span> <span class="built_in">set</span> smartcase                                         <span class="string">"如果搜索模式包含大写字符，不使用 'ignorecase' 选项，只有在输入搜索模式并且打开 'ignorecase' 选项时才会使用</span></span><br><span class="line"><span class="string">"</span> <span class="built_in">set</span> noincsearch                                       <span class="string">"在输入要搜索的文字时，取消实时匹配</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">"</span> Ctrl + K 插入模式下光标向上移动</span><br><span class="line">imap &lt;c-k&gt; &lt;Up&gt;</span><br><span class="line"></span><br><span class="line"><span class="string">" Ctrl + J 插入模式下光标向下移动</span></span><br><span class="line"><span class="string">imap &lt;c-j&gt; &lt;Down&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">"</span> Ctrl + H 插入模式下光标向左移动</span><br><span class="line">imap &lt;c-h&gt; &lt;Left&gt;</span><br><span class="line"></span><br><span class="line"><span class="string">" Ctrl + L 插入模式下光标向右移动</span></span><br><span class="line"><span class="string">imap &lt;c-l&gt; &lt;Right&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">"</span> 启用每行超过80列的字符提示（字体变蓝并加下划线），不启用就注释掉</span><br><span class="line"><span class="string">" au BufWinEnter * let w:m2=matchadd('Underlined', '\%&gt;' . 80 . 'v.\+', -1)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">"</span> -----------------------------------------------------------------------------</span><br><span class="line"><span class="string">"  &lt; 界面配置 &gt;</span></span><br><span class="line"><span class="string">"</span> -----------------------------------------------------------------------------</span><br><span class="line"><span class="built_in">set</span> number                                            <span class="string">"显示行号</span></span><br><span class="line"><span class="string">set laststatus=2                                      "</span>启用状态栏信息</span><br><span class="line"><span class="built_in">set</span> cmdheight=2                                       <span class="string">"设置命令行的高度为2，默认为1</span></span><br><span class="line"><span class="string">set cursorline                                        "</span>突出显示当前行</span><br><span class="line"><span class="string">" set guifont=YaHei_Consolas_Hybrid:h10                 "</span>设置字体:字号（字体名称空格用下划线代替）</span><br><span class="line"><span class="built_in">set</span> guifont=courier_new:h9                            <span class="string">"设置字体:字号（字体名称空格用下划线代替）</span></span><br><span class="line"><span class="string">"</span> <span class="built_in">set</span> nowrap                                            <span class="string">"设置不自动换行</span></span><br><span class="line"><span class="string">set shortmess=atI                                     "</span>去掉欢迎界面</span><br><span class="line"></span><br><span class="line"><span class="string">" 设置 gVim 窗口初始位置及大小</span></span><br><span class="line"><span class="string">if g:isGUI</span></span><br><span class="line"><span class="string">    set guifont=courier_new:h16                           "</span>设置字体:字号（字体名称空格用下划线代替）</span><br><span class="line">    <span class="string">" au GUIEnter * simalt ~x                           "</span>窗口启动时自动最大化</span><br><span class="line">    winpos 100 10                                     <span class="string">"指定窗口出现的位置，坐标原点在屏幕左上角</span></span><br><span class="line"><span class="string">    set lines=50 columns=180                          "</span>指定窗口大小，lines为高度，columns为宽度</span><br><span class="line">endif</span><br><span class="line"></span><br><span class="line"><span class="string">" 设置代码配色方案</span></span><br><span class="line"><span class="string">if g:isGUI</span></span><br><span class="line"><span class="string">    colorscheme molokai               "</span>Gvim配色方案</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    colorscheme molokai               <span class="string">"终端配色方案</span></span><br><span class="line"><span class="string">endif</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">"</span> 显示/隐藏菜单栏、工具栏、滚动条，可用 Ctrl + F11 切换</span><br><span class="line"><span class="keyword">if</span> g:isGUI</span><br><span class="line">    <span class="built_in">set</span> guioptions-=m</span><br><span class="line">    <span class="built_in">set</span> guioptions-=T</span><br><span class="line">    <span class="built_in">set</span> guioptions-=r</span><br><span class="line">    <span class="built_in">set</span> guioptions-=L</span><br><span class="line">    nmap &lt;silent&gt; &lt;c-F11&gt; :<span class="keyword">if</span> &amp;guioptions =~<span class="comment"># 'm' &lt;Bar&gt;</span></span><br><span class="line">        \<span class="built_in">set</span> guioptions-=m &lt;Bar&gt;</span><br><span class="line">        \<span class="built_in">set</span> guioptions-=T &lt;Bar&gt;</span><br><span class="line">        \<span class="built_in">set</span> guioptions-=r &lt;Bar&gt;</span><br><span class="line">        \<span class="built_in">set</span> guioptions-=L &lt;Bar&gt;</span><br><span class="line">    \<span class="keyword">else</span> &lt;Bar&gt;</span><br><span class="line">        \<span class="built_in">set</span> guioptions+=m &lt;Bar&gt;</span><br><span class="line">        \<span class="built_in">set</span> guioptions+=T &lt;Bar&gt;</span><br><span class="line">        \<span class="built_in">set</span> guioptions+=r &lt;Bar&gt;</span><br><span class="line">        \<span class="built_in">set</span> guioptions+=L &lt;Bar&gt;</span><br><span class="line">    \endif&lt;CR&gt;</span><br><span class="line">endif</span><br><span class="line"></span><br><span class="line"><span class="string">" -----------------------------------------------------------------------------</span></span><br><span class="line"><span class="string">"</span>  &lt; 编译、连接、运行配置 (目前只配置了C、C++、Java语言)&gt;</span><br><span class="line"><span class="string">" -----------------------------------------------------------------------------</span></span><br><span class="line"><span class="string">"</span> F9 一键保存、编译、连接存并运行</span><br><span class="line">nmap &lt;F9&gt; :call Run()&lt;CR&gt;</span><br><span class="line">imap &lt;F9&gt; &lt;ESC&gt;:call Run()&lt;CR&gt;</span><br><span class="line"></span><br><span class="line"><span class="string">" Ctrl + F9 一键保存并编译</span></span><br><span class="line"><span class="string">nmap &lt;c-F9&gt; :call Compile()&lt;CR&gt;</span></span><br><span class="line"><span class="string">imap &lt;c-F9&gt; &lt;ESC&gt;:call Compile()&lt;CR&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">"</span> Ctrl + F10 一键保存并连接</span><br><span class="line">nmap &lt;c-F10&gt; :call Link()&lt;CR&gt;</span><br><span class="line">imap &lt;c-F10&gt; &lt;ESC&gt;:call Link()&lt;CR&gt;</span><br><span class="line"></span><br><span class="line"><span class="built_in">let</span> s:LastShellReturn_C = 0</span><br><span class="line"><span class="built_in">let</span> s:LastShellReturn_L = 0</span><br><span class="line"><span class="built_in">let</span> s:ShowWarning = 1</span><br><span class="line"><span class="built_in">let</span> s:Obj_Extension = <span class="string">'.o'</span></span><br><span class="line"><span class="built_in">let</span> s:Exe_Extension = <span class="string">'.exe'</span></span><br><span class="line"><span class="built_in">let</span> s:Class_Extension = <span class="string">'.class'</span></span><br><span class="line"><span class="built_in">let</span> s:Sou_Error = 0</span><br><span class="line"></span><br><span class="line"><span class="built_in">let</span> s:windows_CFlags = <span class="string">'gcc\ -fexec-charset=gbk\ -Wall\ -g\ -O0\ -c\ %\ -o\ %&lt;.o'</span></span><br><span class="line"><span class="built_in">let</span> s:linux_CFlags = <span class="string">'gcc\ -Wall\ -g\ -O0\ -c\ %\ -o\ %&lt;.o'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">let</span> s:windows_CPPFlags = <span class="string">'g++\ -fexec-charset=gbk\ -Wall\ -g\ -O0\ -c\ %\ -o\ %&lt;.o'</span></span><br><span class="line"><span class="built_in">let</span> s:linux_CPPFlags = <span class="string">'g++\ -Wall\ -g\ -O0\ -c\ %\ -o\ %&lt;.o'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">let</span> s:JavaFlags = <span class="string">'javac\ %'</span></span><br><span class="line"></span><br><span class="line">func! Compile()</span><br><span class="line">    exe <span class="string">":ccl"</span></span><br><span class="line">    exe <span class="string">":update"</span></span><br><span class="line">    <span class="built_in">let</span> s:Sou_Error = 0</span><br><span class="line">    <span class="built_in">let</span> s:LastShellReturn_C = 0</span><br><span class="line">    <span class="built_in">let</span> Sou = expand(<span class="string">"%:p"</span>)</span><br><span class="line">    <span class="built_in">let</span> v:statusmsg = <span class="string">''</span></span><br><span class="line">    <span class="keyword">if</span> expand(<span class="string">"%:e"</span>) == <span class="string">"c"</span> || expand(<span class="string">"%:e"</span>) == <span class="string">"cpp"</span> || expand(<span class="string">"%:e"</span>) == <span class="string">"cxx"</span></span><br><span class="line">        <span class="built_in">let</span> Obj = expand(<span class="string">"%:p:r"</span>).s:Obj_Extension</span><br><span class="line">        <span class="built_in">let</span> Obj_Name = expand(<span class="string">"%:p:t:r"</span>).s:Obj_Extension</span><br><span class="line">        <span class="keyword">if</span> !filereadable(Obj) || (filereadable(Obj) &amp;&amp; (getftime(Obj) &lt; getftime(Sou)))</span><br><span class="line">            redraw!</span><br><span class="line">            <span class="keyword">if</span> expand(<span class="string">"%:e"</span>) == <span class="string">"c"</span></span><br><span class="line">                <span class="keyword">if</span> g:iswindows</span><br><span class="line">                    exe <span class="string">":setlocal makeprg="</span>.s:windows_CFlags</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    exe <span class="string">":setlocal makeprg="</span>.s:linux_CFlags</span><br><span class="line">                endif</span><br><span class="line">                echohl WarningMsg | <span class="built_in">echo</span> <span class="string">" compiling..."</span></span><br><span class="line">                silent make</span><br><span class="line">            elseif expand(<span class="string">"%:e"</span>) == <span class="string">"cpp"</span> || expand(<span class="string">"%:e"</span>) == <span class="string">"cxx"</span></span><br><span class="line">                <span class="keyword">if</span> g:iswindows</span><br><span class="line">                    exe <span class="string">":setlocal makeprg="</span>.s:windows_CPPFlags</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    exe <span class="string">":setlocal makeprg="</span>.s:linux_CPPFlags</span><br><span class="line">                endif</span><br><span class="line">                echohl WarningMsg | <span class="built_in">echo</span> <span class="string">" compiling..."</span></span><br><span class="line">                silent make</span><br><span class="line">            endif</span><br><span class="line">            redraw!</span><br><span class="line">            <span class="keyword">if</span> v:shell_error != 0</span><br><span class="line">                <span class="built_in">let</span> s:LastShellReturn_C = v:shell_error</span><br><span class="line">            endif</span><br><span class="line">            <span class="keyword">if</span> g:iswindows</span><br><span class="line">                <span class="keyword">if</span> s:LastShellReturn_C != 0</span><br><span class="line">                    exe <span class="string">":bo cope"</span></span><br><span class="line">                    echohl WarningMsg | <span class="built_in">echo</span> <span class="string">" compilation failed"</span></span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    <span class="keyword">if</span> s:ShowWarning</span><br><span class="line">                        exe <span class="string">":bo cw"</span></span><br><span class="line">                    endif</span><br><span class="line">                    echohl WarningMsg | <span class="built_in">echo</span> <span class="string">" compilation successful"</span></span><br><span class="line">                endif</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                <span class="keyword">if</span> empty(v:statusmsg)</span><br><span class="line">                    echohl WarningMsg | <span class="built_in">echo</span> <span class="string">" compilation successful"</span></span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    exe <span class="string">":bo cope"</span></span><br><span class="line">                endif</span><br><span class="line">            endif</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            echohl WarningMsg | <span class="built_in">echo</span> <span class="string">""</span>Obj_Name<span class="string">"is up to date"</span></span><br><span class="line">        endif</span><br><span class="line">    elseif expand(<span class="string">"%:e"</span>) == <span class="string">"java"</span></span><br><span class="line">        <span class="built_in">let</span> class = expand(<span class="string">"%:p:r"</span>).s:Class_Extension</span><br><span class="line">        <span class="built_in">let</span> class_Name = expand(<span class="string">"%:p:t:r"</span>).s:Class_Extension</span><br><span class="line">        <span class="keyword">if</span> !filereadable(class) || (filereadable(class) &amp;&amp; (getftime(class) &lt; getftime(Sou)))</span><br><span class="line">            redraw!</span><br><span class="line">            exe <span class="string">":setlocal makeprg="</span>.s:JavaFlags</span><br><span class="line">            echohl WarningMsg | <span class="built_in">echo</span> <span class="string">" compiling..."</span></span><br><span class="line">            silent make</span><br><span class="line">            redraw!</span><br><span class="line">            <span class="keyword">if</span> v:shell_error != 0</span><br><span class="line">                <span class="built_in">let</span> s:LastShellReturn_C = v:shell_error</span><br><span class="line">            endif</span><br><span class="line">            <span class="keyword">if</span> g:iswindows</span><br><span class="line">                <span class="keyword">if</span> s:LastShellReturn_C != 0</span><br><span class="line">                    exe <span class="string">":bo cope"</span></span><br><span class="line">                    echohl WarningMsg | <span class="built_in">echo</span> <span class="string">" compilation failed"</span></span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    <span class="keyword">if</span> s:ShowWarning</span><br><span class="line">                        exe <span class="string">":bo cw"</span></span><br><span class="line">                    endif</span><br><span class="line">                    echohl WarningMsg | <span class="built_in">echo</span> <span class="string">" compilation successful"</span></span><br><span class="line">                endif</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                <span class="keyword">if</span> empty(v:statusmsg)</span><br><span class="line">                    echohl WarningMsg | <span class="built_in">echo</span> <span class="string">" compilation successful"</span></span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    exe <span class="string">":bo cope"</span></span><br><span class="line">                endif</span><br><span class="line">            endif</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            echohl WarningMsg | <span class="built_in">echo</span> <span class="string">""</span>class_Name<span class="string">"is up to date"</span></span><br><span class="line">        endif</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">let</span> s:Sou_Error = 1</span><br><span class="line">        echohl WarningMsg | <span class="built_in">echo</span> <span class="string">" please choose the correct source file"</span></span><br><span class="line">    endif</span><br><span class="line">    exe <span class="string">":setlocal makeprg=make"</span></span><br><span class="line">endfunc</span><br><span class="line"></span><br><span class="line">func! Link()</span><br><span class="line">    call Compile()</span><br><span class="line">    <span class="keyword">if</span> s:Sou_Error || s:LastShellReturn_C != 0</span><br><span class="line">        <span class="built_in">return</span></span><br><span class="line">    endif</span><br><span class="line">    <span class="keyword">if</span> expand(<span class="string">"%:e"</span>) == <span class="string">"c"</span> || expand(<span class="string">"%:e"</span>) == <span class="string">"cpp"</span> || expand(<span class="string">"%:e"</span>) == <span class="string">"cxx"</span></span><br><span class="line">        <span class="built_in">let</span> s:LastShellReturn_L = 0</span><br><span class="line">        <span class="built_in">let</span> Sou = expand(<span class="string">"%:p"</span>)</span><br><span class="line">        <span class="built_in">let</span> Obj = expand(<span class="string">"%:p:r"</span>).s:Obj_Extension</span><br><span class="line">        <span class="keyword">if</span> g:iswindows</span><br><span class="line">            <span class="built_in">let</span> Exe = expand(<span class="string">"%:p:r"</span>).s:Exe_Extension</span><br><span class="line">            <span class="built_in">let</span> Exe_Name = expand(<span class="string">"%:p:t:r"</span>).s:Exe_Extension</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="built_in">let</span> Exe = expand(<span class="string">"%:p:r"</span>)</span><br><span class="line">            <span class="built_in">let</span> Exe_Name = expand(<span class="string">"%:p:t:r"</span>)</span><br><span class="line">        endif</span><br><span class="line">        <span class="built_in">let</span> v:statusmsg = <span class="string">''</span></span><br><span class="line">        <span class="keyword">if</span> filereadable(Obj) &amp;&amp; (getftime(Obj) &gt;= getftime(Sou))</span><br><span class="line">            redraw!</span><br><span class="line">            <span class="keyword">if</span> !executable(Exe) || (executable(Exe) &amp;&amp; getftime(Exe) &lt; getftime(Obj))</span><br><span class="line">                <span class="keyword">if</span> expand(<span class="string">"%:e"</span>) == <span class="string">"c"</span></span><br><span class="line">                    setlocal makeprg=gcc\ -o\ %&lt;\ %&lt;.o</span><br><span class="line">                    echohl WarningMsg | <span class="built_in">echo</span> <span class="string">" linking..."</span></span><br><span class="line">                    silent make</span><br><span class="line">                elseif expand(<span class="string">"%:e"</span>) == <span class="string">"cpp"</span> || expand(<span class="string">"%:e"</span>) == <span class="string">"cxx"</span></span><br><span class="line">                    setlocal makeprg=g++\ -o\ %&lt;\ %&lt;.o</span><br><span class="line">                    echohl WarningMsg | <span class="built_in">echo</span> <span class="string">" linking..."</span></span><br><span class="line">                    silent make</span><br><span class="line">                endif</span><br><span class="line">                redraw!</span><br><span class="line">                <span class="keyword">if</span> v:shell_error != 0</span><br><span class="line">                    <span class="built_in">let</span> s:LastShellReturn_L = v:shell_error</span><br><span class="line">                endif</span><br><span class="line">                <span class="keyword">if</span> g:iswindows</span><br><span class="line">                    <span class="keyword">if</span> s:LastShellReturn_L != 0</span><br><span class="line">                        exe <span class="string">":bo cope"</span></span><br><span class="line">                        echohl WarningMsg | <span class="built_in">echo</span> <span class="string">" linking failed"</span></span><br><span class="line">                    <span class="keyword">else</span></span><br><span class="line">                        <span class="keyword">if</span> s:ShowWarning</span><br><span class="line">                            exe <span class="string">":bo cw"</span></span><br><span class="line">                        endif</span><br><span class="line">                        echohl WarningMsg | <span class="built_in">echo</span> <span class="string">" linking successful"</span></span><br><span class="line">                    endif</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    <span class="keyword">if</span> empty(v:statusmsg)</span><br><span class="line">                        echohl WarningMsg | <span class="built_in">echo</span> <span class="string">" linking successful"</span></span><br><span class="line">                    <span class="keyword">else</span></span><br><span class="line">                        exe <span class="string">":bo cope"</span></span><br><span class="line">                    endif</span><br><span class="line">                endif</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                echohl WarningMsg | <span class="built_in">echo</span> <span class="string">""</span>Exe_Name<span class="string">"is up to date"</span></span><br><span class="line">            endif</span><br><span class="line">        endif</span><br><span class="line">        setlocal makeprg=make</span><br><span class="line">    elseif expand(<span class="string">"%:e"</span>) == <span class="string">"java"</span></span><br><span class="line">        <span class="built_in">return</span></span><br><span class="line">    endif</span><br><span class="line">endfunc</span><br><span class="line"></span><br><span class="line">func! Run()</span><br><span class="line">    <span class="built_in">let</span> s:ShowWarning = 0</span><br><span class="line">    call Link()</span><br><span class="line">    <span class="built_in">let</span> s:ShowWarning = 1</span><br><span class="line">    <span class="keyword">if</span> s:Sou_Error || s:LastShellReturn_C != 0 || s:LastShellReturn_L != 0</span><br><span class="line">        <span class="built_in">return</span></span><br><span class="line">    endif</span><br><span class="line">    <span class="built_in">let</span> Sou = expand(<span class="string">"%:p"</span>)</span><br><span class="line">    <span class="keyword">if</span> expand(<span class="string">"%:e"</span>) == <span class="string">"c"</span> || expand(<span class="string">"%:e"</span>) == <span class="string">"cpp"</span> || expand(<span class="string">"%:e"</span>) == <span class="string">"cxx"</span></span><br><span class="line">        <span class="built_in">let</span> Obj = expand(<span class="string">"%:p:r"</span>).s:Obj_Extension</span><br><span class="line">        <span class="keyword">if</span> g:iswindows</span><br><span class="line">            <span class="built_in">let</span> Exe = expand(<span class="string">"%:p:r"</span>).s:Exe_Extension</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="built_in">let</span> Exe = expand(<span class="string">"%:p:r"</span>)</span><br><span class="line">        endif</span><br><span class="line">        <span class="keyword">if</span> executable(Exe) &amp;&amp; getftime(Exe) &gt;= getftime(Obj) &amp;&amp; getftime(Obj) &gt;= getftime(Sou)</span><br><span class="line">            redraw!</span><br><span class="line">            echohl WarningMsg | <span class="built_in">echo</span> <span class="string">" running..."</span></span><br><span class="line">            <span class="keyword">if</span> g:iswindows</span><br><span class="line">                exe <span class="string">":!%&lt;.exe"</span></span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                <span class="keyword">if</span> g:isGUI</span><br><span class="line">                    exe <span class="string">":!gnome-terminal -x bash -c './%&lt;; echo; echo 请按 Enter 键继续; read'"</span></span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    exe <span class="string">":!clear; ./%&lt;"</span></span><br><span class="line">                endif</span><br><span class="line">            endif</span><br><span class="line">            redraw!</span><br><span class="line">            echohl WarningMsg | <span class="built_in">echo</span> <span class="string">" running finish"</span></span><br><span class="line">        endif</span><br><span class="line">    elseif expand(<span class="string">"%:e"</span>) == <span class="string">"java"</span></span><br><span class="line">        <span class="built_in">let</span> class = expand(<span class="string">"%:p:r"</span>).s:Class_Extension</span><br><span class="line">        <span class="keyword">if</span> getftime(class) &gt;= getftime(Sou)</span><br><span class="line">            redraw!</span><br><span class="line">            echohl WarningMsg | <span class="built_in">echo</span> <span class="string">" running..."</span></span><br><span class="line">            <span class="keyword">if</span> g:iswindows</span><br><span class="line">                exe <span class="string">":!java %&lt;"</span></span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                <span class="keyword">if</span> g:isGUI</span><br><span class="line">                    exe <span class="string">":!gnome-terminal -x bash -c 'java %&lt;; echo; echo 请按 Enter 键继续; read'"</span></span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    exe <span class="string">":!clear; java %&lt;"</span></span><br><span class="line">                endif</span><br><span class="line">            endif</span><br><span class="line">            redraw!</span><br><span class="line">            echohl WarningMsg | <span class="built_in">echo</span> <span class="string">" running finish"</span></span><br><span class="line">        endif</span><br><span class="line">    endif</span><br><span class="line">endfunc</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="string">" -----------------------------------------------------------------------------</span></span><br><span class="line"><span class="string">"</span>  &lt; 其它配置 &gt;</span><br><span class="line"><span class="string">" -----------------------------------------------------------------------------</span></span><br><span class="line"><span class="string">set writebackup                             "</span>保存文件前建立备份，保存成功后删除该备份</span><br><span class="line"><span class="built_in">set</span> nobackup                                <span class="string">"设置无备份文件</span></span><br><span class="line"><span class="string">"</span> <span class="built_in">set</span> noswapfile                              <span class="string">"设置无临时文件</span></span><br><span class="line"><span class="string">"</span> <span class="built_in">set</span> vb t_vb=                                <span class="string">"关闭提示音</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">"</span> =============================================================================</span><br><span class="line"><span class="string">"                          &lt;&lt; 以下为常用插件配置 &gt;&gt;</span></span><br><span class="line"><span class="string">"</span> =============================================================================</span><br><span class="line"></span><br><span class="line"><span class="string">" -----------------------------------------------------------------------------</span></span><br><span class="line"><span class="string">"</span>  &lt; a.vim 插件配置 &gt;</span><br><span class="line"><span class="string">" -----------------------------------------------------------------------------</span></span><br><span class="line"><span class="string">"</span> 用于切换C/C++头文件</span><br><span class="line"><span class="string">" :A     ---切换头文件并独占整个窗口</span></span><br><span class="line"><span class="string">"</span> :AV    ---切换头文件并垂直分割窗口</span><br><span class="line"><span class="string">" :AS    ---切换头文件并水平分割窗口</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">"</span> -----------------------------------------------------------------------------</span><br><span class="line"><span class="string">"  &lt; BufExplorer 插件配置 &gt;</span></span><br><span class="line"><span class="string">"</span> -----------------------------------------------------------------------------</span><br><span class="line"><span class="string">" 快速轻松的在缓存中切换（相当于另一种多个文件间的切换方式）</span></span><br><span class="line"><span class="string">"</span> &lt;Leader&gt;be 在当前窗口显示缓存列表并打开选定文件</span><br><span class="line"><span class="string">" &lt;Leader&gt;bs 水平分割窗口显示缓存列表，并在缓存列表窗口中打开选定文件</span></span><br><span class="line"><span class="string">"</span> &lt;Leader&gt;bv 垂直分割窗口显示缓存列表，并在缓存列表窗口中打开选定文件</span><br><span class="line"></span><br><span class="line"><span class="string">" -----------------------------------------------------------------------------</span></span><br><span class="line"><span class="string">"</span>  &lt; ccvext.vim 插件配置 &gt;</span><br><span class="line"><span class="string">" -----------------------------------------------------------------------------</span></span><br><span class="line"><span class="string">"</span> 用于对指定文件自动生成tags与cscope文件并连接</span><br><span class="line"><span class="string">" 如果是Windows系统, 则生成的文件在源文件所在盘符根目录的.symbs目录下(如: X:\.symbs\)</span></span><br><span class="line"><span class="string">"</span> 如果是Linux系统, 则生成的文件在~/.symbs/目录下</span><br><span class="line"><span class="string">" 具体用法可参考www.vim.org中此插件的说明</span></span><br><span class="line"><span class="string">"</span> &lt;Leader&gt;sy 自动生成tags与cscope文件并连接</span><br><span class="line"><span class="string">" &lt;Leader&gt;sc 连接已存在的tags与cscope文件</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">"</span> -----------------------------------------------------------------------------</span><br><span class="line"><span class="string">"  &lt; cSyntaxAfter 插件配置 &gt;</span></span><br><span class="line"><span class="string">"</span> -----------------------------------------------------------------------------</span><br><span class="line"><span class="string">" 高亮括号与运算符等</span></span><br><span class="line"><span class="string">"</span> au! BufRead,BufNewFile,BufEnter *.&#123;c,cpp,h,java,javascript&#125; call CSyntaxAfter()</span><br><span class="line"></span><br><span class="line"><span class="string">" -----------------------------------------------------------------------------</span></span><br><span class="line"><span class="string">"</span>  &lt; indentLine 插件配置 &gt;</span><br><span class="line"><span class="string">" -----------------------------------------------------------------------------</span></span><br><span class="line"><span class="string">"</span> 用于显示对齐线，与 indent_guides 在显示方式上不同，根据自己喜好选择了</span><br><span class="line"><span class="string">" 在终端上会有屏幕刷新的问题，这个问题能解决有更好了</span></span><br><span class="line"><span class="string">"</span> 开启/关闭对齐线</span><br><span class="line">nmap &lt;leader&gt;il :IndentLinesToggle&lt;CR&gt;</span><br><span class="line"></span><br><span class="line"><span class="string">" 设置Gvim的对齐线样式</span></span><br><span class="line"><span class="string">if g:isGUI</span></span><br><span class="line"><span class="string">    let g:indentLine_char = "</span>┊<span class="string">"</span></span><br><span class="line"><span class="string">    let g:indentLine_first_char = "</span>┊<span class="string">"</span></span><br><span class="line"><span class="string">endif</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">"</span> 设置终端对齐线颜色，如果不喜欢可以将其注释掉采用默认颜色</span><br><span class="line"><span class="built_in">let</span> g:indentLine_color_term = 239</span><br><span class="line"></span><br><span class="line"><span class="string">" 设置 GUI 对齐线颜色，如果不喜欢可以将其注释掉采用默认颜色</span></span><br><span class="line"><span class="string">"</span> <span class="built_in">let</span> g:indentLine_color_gui = <span class="string">'#A4E57E'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="string">" "</span> -----------------------------------------------------------------------------</span><br><span class="line"><span class="string">" "</span>  &lt; MiniBufExplorer 插件配置 &gt;</span><br><span class="line"><span class="string">" "</span> -----------------------------------------------------------------------------</span><br><span class="line"><span class="string">" "</span> 快速浏览和操作Buffer</span><br><span class="line"><span class="string">" "</span> 主要用于同时打开多个文件并相与切换</span><br><span class="line"></span><br><span class="line"><span class="string">" "</span> <span class="built_in">let</span> g:miniBufExplMapWindowNavArrows = 1     <span class="string">"用Ctrl加方向键切换到上下左右的窗口中去</span></span><br><span class="line"><span class="string">"</span> <span class="built_in">let</span> g:miniBufExplMapWindowNavVim = 1        <span class="string">"用&lt;C-k,j,h,l&gt;切换到上下左右的窗口中去</span></span><br><span class="line"><span class="string">"</span> <span class="built_in">let</span> g:miniBufExplMapCTabSwitchBufs = 1      <span class="string">"功能增强（不过好像只有在Windows中才有用）</span></span><br><span class="line"><span class="string">"</span> <span class="string">"                                            &lt;C-Tab&gt; 向前循环切换到每个buffer上,并在但前窗口打开</span></span><br><span class="line"><span class="string">"</span> <span class="string">"                                            &lt;C-S-Tab&gt; 向后循环切换到每个buffer上,并在当前窗口打开</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">"</span> 在不使用 MiniBufExplorer 插件时也可用&lt;C-k,j,h,l&gt;切换到上下左右的窗口中去</span><br><span class="line">noremap &lt;c-k&gt; &lt;c-w&gt;k</span><br><span class="line">noremap &lt;c-j&gt; &lt;c-w&gt;j</span><br><span class="line">noremap &lt;c-h&gt; &lt;c-w&gt;h</span><br><span class="line">noremap &lt;c<span class="_">-l</span>&gt; &lt;c-w&gt;l</span><br><span class="line"></span><br><span class="line"><span class="string">" -----------------------------------------------------------------------------</span></span><br><span class="line"><span class="string">"</span>  &lt; neocomplcache 插件配置 &gt;</span><br><span class="line"><span class="string">" -----------------------------------------------------------------------------</span></span><br><span class="line"><span class="string">"</span> 关键字补全、文件路径补全、tag补全等等，各种，非常好用，速度超快。</span><br><span class="line"><span class="built_in">let</span> g:neocomplcache_enable_at_startup = 1     <span class="string">"vim 启动时启用插件</span></span><br><span class="line"><span class="string">"</span> <span class="built_in">let</span> g:neocomplcache_disable_auto_complete = 1 <span class="string">"不自动弹出补全列表</span></span><br><span class="line"><span class="string">"</span> 在弹出补全列表后用 &lt;c-p&gt; 或 &lt;c-n&gt; 进行上下选择效果比较好</span><br><span class="line"></span><br><span class="line"><span class="string">" -----------------------------------------------------------------------------</span></span><br><span class="line"><span class="string">"</span>  &lt; nerdcommenter 插件配置 &gt;</span><br><span class="line"><span class="string">" -----------------------------------------------------------------------------</span></span><br><span class="line"><span class="string">"</span> 我主要用于C/C++代码注释(其它的也行)</span><br><span class="line"><span class="string">" 以下为插件默认快捷键，其中的说明是以C/C++为例的，其它语言类似</span></span><br><span class="line"><span class="string">"</span> &lt;Leader&gt;ci 以每行一个 /* */ 注释选中行(选中区域所在行)，再输入则取消注释</span><br><span class="line"><span class="string">" &lt;Leader&gt;cm 以一个 /* */ 注释选中行(选中区域所在行)，再输入则称重复注释</span></span><br><span class="line"><span class="string">"</span> &lt;Leader&gt;cc 以每行一个 /* */ 注释选中行或区域，再输入则称重复注释</span><br><span class="line"><span class="string">" &lt;Leader&gt;cu 取消选中区域(行)的注释，选中区域(行)内至少有一个 /* */</span></span><br><span class="line"><span class="string">"</span> &lt;Leader&gt;ca 在/*...*/与//这两种注释方式中切换（其它语言可能不一样了）</span><br><span class="line"><span class="string">" &lt;Leader&gt;cA 行尾注释</span></span><br><span class="line"><span class="string">let NERDSpaceDelims = 1                     "</span>在左注释符之后，右注释符之前留有空格</span><br><span class="line"></span><br><span class="line"><span class="string">" -----------------------------------------------------------------------------</span></span><br><span class="line"><span class="string">"</span>  &lt; nerdtree 插件配置 &gt;</span><br><span class="line"><span class="string">" -----------------------------------------------------------------------------</span></span><br><span class="line"><span class="string">"</span> 有目录村结构的文件浏览插件</span><br><span class="line"></span><br><span class="line"><span class="string">" 常规模式下输入 F2 调用插件</span></span><br><span class="line"><span class="string">nmap &lt;F2&gt; :NERDTreeToggle&lt;CR&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">"</span> -----------------------------------------------------------------------------</span><br><span class="line"><span class="string">"  &lt; omnicppcomplete 插件配置 &gt;</span></span><br><span class="line"><span class="string">"</span> -----------------------------------------------------------------------------</span><br><span class="line"><span class="string">" 用于C/C++代码补全，这种补全主要针对命名空间、类、结构、共同体等进行补全，详细</span></span><br><span class="line"><span class="string">"</span> 说明可以参考帮助或网络教程等</span><br><span class="line"><span class="string">" 使用前先执行如下 ctags 命令（本配置中可以直接使用 ccvext 插件来执行以下命令）</span></span><br><span class="line"><span class="string">"</span> ctags -R --c++-kinds=+p --fields=+iaS --extra=+q</span><br><span class="line"><span class="string">" 我使用上面的参数生成标签后，对函数使用跳转时会出现多个选择</span></span><br><span class="line"><span class="string">"</span> 所以我就将--c++-kinds=+p参数给去掉了，如果大侠有什么其它解决方法希望不要保留呀</span><br><span class="line"><span class="built_in">set</span> completeopt=menu                        <span class="string">"关闭预览窗口</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">"</span> 函数名全局搜索 F3</span><br><span class="line">nmap &lt;F3&gt; &lt;ESC&gt;:CtrlSF &lt;c-r&gt;&lt;c-w&gt;&lt;CR&gt; </span><br><span class="line">nmap &lt;C-F3&gt; &lt;ESC&gt;:CtrlSFOpen&lt;CR&gt;</span><br><span class="line"></span><br><span class="line"><span class="string">" -----------------------------------------------------------------------------</span></span><br><span class="line"><span class="string">"</span>  &lt; SrcExpl 插件配置 &gt;</span><br><span class="line"><span class="string">" -----------------------------------------------------------------------------</span></span><br><span class="line"><span class="string">"</span> 增强源代码浏览，其功能就像Windows中的<span class="string">"Source Insight"</span></span><br><span class="line">nmap &lt;F4&gt; :SrcExplToggle&lt;CR&gt;                <span class="string">"打开/闭浏览窗口</span></span><br><span class="line"><span class="string">"</span> // Set the height of Source Explorer window</span><br><span class="line"><span class="built_in">let</span> g:SrcExpl_winHeight = 8</span><br><span class="line"></span><br><span class="line"><span class="string">" // Set 100 ms for refreshing the Source Explorer</span></span><br><span class="line"><span class="string">let g:SrcExpl_refreshTime = 100</span></span><br><span class="line"><span class="string">"</span> // In order to Avoid conflicts, the Source Explorer should know what plugins</span><br><span class="line"><span class="string">" // are using buffers. And you need add their bufname into the list below</span></span><br><span class="line"><span class="string">"</span> // according to the <span class="built_in">command</span> <span class="string">":buffers!"</span></span><br><span class="line"><span class="built_in">let</span> g:SrcExpl_pluginList = [</span><br><span class="line">        \ <span class="string">"__Tag_List__"</span>,</span><br><span class="line">        \ <span class="string">"_NERD_tree_"</span>,</span><br><span class="line">        \ <span class="string">"Source_Explorer"</span></span><br><span class="line">    \ ]</span><br><span class="line"><span class="string">" // Do not let the Source Explorer update the tags file when opening          "</span></span><br><span class="line"><span class="built_in">let</span> g:SrcExpl_isUpdateTags = 0</span><br><span class="line"><span class="string">" // Enable/Disable the local definition searching, and note that this is not  "</span></span><br><span class="line"><span class="string">" // guaranteed to work, the Source Explorer doesn't check the syntax for now. "</span></span><br><span class="line"><span class="string">" // It only searches for a match with the keyword according to command 'gd'   "</span></span><br><span class="line"><span class="built_in">let</span> g:SrcExpl_searchLocalDef = 1</span><br><span class="line"></span><br><span class="line"><span class="string">" 启用 // 注视风格</span></span><br><span class="line"><span class="string">let c_cpp_comments = 0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">"</span> -----------------------------------------------------------------------------</span><br><span class="line"><span class="string">"  &lt; Tagbar 插件配置 &gt;</span></span><br><span class="line"><span class="string">"</span> -----------------------------------------------------------------------------</span><br><span class="line"><span class="string">" 相对 TagList 能更好的支持面向对象</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">"</span> 常规模式下输入 tb 调用插件，如果有打开 TagList 窗口则先将其关闭</span><br><span class="line">nmap tb :TlistClose&lt;CR&gt;:TagbarToggle&lt;CR&gt;</span><br><span class="line"></span><br><span class="line"><span class="built_in">let</span> g:tagbar_width=30                       <span class="string">"设置窗口宽度</span></span><br><span class="line"><span class="string">"</span> <span class="built_in">let</span> g:tagbar_left=1                         <span class="string">"在左侧窗口中显示</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">"</span> -----------------------------------------------------------------------------</span><br><span class="line"><span class="string">"  &lt; TagList 插件配置 &gt;</span></span><br><span class="line"><span class="string">"</span> -----------------------------------------------------------------------------</span><br><span class="line"><span class="string">" 高效地浏览源码, 其功能就像vc中的workpace</span></span><br><span class="line"><span class="string">"</span> 那里面列出了当前文件中的所有宏,全局变量, 函数名等</span><br><span class="line"></span><br><span class="line"><span class="string">" 常规模式下输入 tl 调用插件，如果有打开 Tagbar 窗口则先将其关闭</span></span><br><span class="line"><span class="string">nmap tl :TagbarClose&lt;CR&gt;:Tlist&lt;CR&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">let Tlist_Show_One_File=1                   "</span>只显示当前文件的tags</span><br><span class="line"><span class="string">" let Tlist_Enable_Fold_Column=0              "</span>使taglist插件不显示左边的折叠行</span><br><span class="line"><span class="built_in">let</span> Tlist_Exit_OnlyWindow=1                <span class="string">"如果Taglist窗口是最后一个窗口则退出Vim</span></span><br><span class="line"><span class="string">let Tlist_File_Fold_Auto_Close=1            "</span>自动折叠</span><br><span class="line"><span class="built_in">let</span> Tlist_WinWidth=30                       <span class="string">"设置窗口宽度</span></span><br><span class="line"><span class="string">let Tlist_Use_Right_Window=1                "</span>在右侧窗口中显示</span><br><span class="line"></span><br><span class="line"><span class="string">" -----------------------------------------------------------------------------</span></span><br><span class="line"><span class="string">"</span>  &lt; txtbrowser 插件配置 &gt;</span><br><span class="line"><span class="string">" -----------------------------------------------------------------------------</span></span><br><span class="line"><span class="string">"</span> 用于文本文件生成标签与与语法高亮（调用TagList插件生成标签，如果可以）</span><br><span class="line">au BufRead,BufNewFile *.txt setlocal ft=txt</span><br><span class="line"></span><br><span class="line"><span class="string">" \ r 快速执行GO</span></span><br><span class="line"><span class="string">"</span> au FileType go nmap &lt;leader&gt;r &lt;Plug&gt;(go-run)</span><br><span class="line"><span class="string">" -----------------------------------------------------------------------------</span></span><br><span class="line"><span class="string">"</span> &lt;rjohnsondev/vim-compiler-go&gt;</span><br><span class="line"><span class="string">" 语法检查  Go 路径</span></span><br><span class="line"><span class="string">"</span> -----------------------------------------------------------------------------</span><br><span class="line">autocmd FileType go compiler golang</span><br><span class="line"><span class="built_in">let</span> g:golang_goroot = <span class="string">"/usr/local/go"</span></span><br><span class="line"></span><br><span class="line"><span class="string">" compile coffee on write</span></span><br><span class="line"><span class="string">let coffee_compile_vert = 1</span></span><br><span class="line"><span class="string">au BufWritePost *.coffee silent execute 'CoffeeMake! -o'.expand('&lt;afile&gt;:p:h').'./'</span></span><br><span class="line"><span class="string">"</span> auto compile on save</span><br><span class="line"></span><br><span class="line"><span class="string">" =============================================================================</span></span><br><span class="line"><span class="string">"</span>                          &lt;&lt; 以下为常用工具配置 &gt;&gt;</span><br><span class="line"><span class="string">" =============================================================================</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">"</span> -----------------------------------------------------------------------------</span><br><span class="line"><span class="string">"  &lt; cscope 工具配置 &gt;</span></span><br><span class="line"><span class="string">"</span> -----------------------------------------------------------------------------</span><br><span class="line"><span class="string">" 用Cscope自己的话说 - "</span>你可以把它当做是超过频的ctags<span class="string">"</span></span><br><span class="line"><span class="string">if has("</span>cscope<span class="string">")</span></span><br><span class="line"><span class="string">    "</span>设定可以使用 quickfix 窗口来查看 cscope 结果</span><br><span class="line">    <span class="built_in">set</span> cscopequickfix=s-,c-,d-,i-,t-,e-</span><br><span class="line">    <span class="string">"使支持用 Ctrl+]  和 Ctrl+t 快捷键在代码间跳转</span></span><br><span class="line"><span class="string">    set cscopetag</span></span><br><span class="line"><span class="string">    "</span>如果你想反向搜索顺序设置为1</span><br><span class="line">    <span class="built_in">set</span> csto=0</span><br><span class="line">    <span class="string">"在当前目录中添加任何数据库</span></span><br><span class="line"><span class="string">    if filereadable("</span>cscope.out<span class="string">")</span></span><br><span class="line"><span class="string">        cs add cscope.out</span></span><br><span class="line"><span class="string">    "</span>否则添加数据库环境中所指出的</span><br><span class="line">    elseif <span class="variable">$CSCOPE_DB</span> != <span class="string">""</span></span><br><span class="line">        cs add <span class="variable">$CSCOPE_DB</span></span><br><span class="line">    endif</span><br><span class="line">    <span class="built_in">set</span> cscopeverbose</span><br><span class="line">    <span class="string">"快捷键设置</span></span><br><span class="line"><span class="string">    nmap &lt;C-\&gt;s :cs find s &lt;C-R&gt;=expand("</span>&lt;cword&gt;<span class="string">")&lt;CR&gt;&lt;CR&gt;</span></span><br><span class="line"><span class="string">    nmap &lt;C-\&gt;g :cs find g &lt;C-R&gt;=expand("</span>&lt;cword&gt;<span class="string">")&lt;CR&gt;&lt;CR&gt;</span></span><br><span class="line"><span class="string">    nmap &lt;C-\&gt;c :cs find c &lt;C-R&gt;=expand("</span>&lt;cword&gt;<span class="string">")&lt;CR&gt;&lt;CR&gt;</span></span><br><span class="line"><span class="string">    nmap &lt;C-\&gt;t :cs find t &lt;C-R&gt;=expand("</span>&lt;cword&gt;<span class="string">")&lt;CR&gt;&lt;CR&gt;</span></span><br><span class="line"><span class="string">    nmap &lt;C-\&gt;e :cs find e &lt;C-R&gt;=expand("</span>&lt;cword&gt;<span class="string">")&lt;CR&gt;&lt;CR&gt;</span></span><br><span class="line"><span class="string">    nmap &lt;C-\&gt;f :cs find f &lt;C-R&gt;=expand("</span>&lt;cfile&gt;<span class="string">")&lt;CR&gt;&lt;CR&gt;</span></span><br><span class="line"><span class="string">    nmap &lt;C-\&gt;i :cs find i ^&lt;C-R&gt;=expand("</span>&lt;cfile&gt;<span class="string">")&lt;CR&gt;$&lt;CR&gt;</span></span><br><span class="line"><span class="string">    nmap &lt;C-\&gt;d :cs find d &lt;C-R&gt;=expand("</span>&lt;cword&gt;<span class="string">")&lt;CR&gt;&lt;CR&gt;</span></span><br><span class="line"><span class="string">endif</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">"</span> -----------------------------------------------------------------------------</span><br><span class="line"><span class="string">"  &lt; ctags 工具配置 &gt;</span></span><br><span class="line"><span class="string">"</span> -----------------------------------------------------------------------------</span><br><span class="line"><span class="string">" 对浏览代码非常的方便,可以在函数,变量之间跳转等</span></span><br><span class="line"><span class="string">set tags=./tags;                            "</span>向上级目录递归查找tags文件（好像只有在Windows下才有用）</span><br><span class="line"></span><br><span class="line"><span class="string">" -----------------------------------------------------------------------------</span></span><br><span class="line"><span class="string">"</span>  &lt; gvimfullscreen 工具配置 &gt; 请确保已安装了工具</span><br><span class="line"><span class="string">" -----------------------------------------------------------------------------</span></span><br><span class="line"><span class="string">"</span> 用于 Windows Gvim 全屏窗口，可用 F11 切换</span><br><span class="line"><span class="string">" 全屏后再隐藏菜单栏、工具栏、滚动条效果更好</span></span><br><span class="line"><span class="string">if (g:iswindows &amp;&amp; g:isGUI)</span></span><br><span class="line"><span class="string">    nmap &lt;F11&gt; &lt;Esc&gt;:call libcallnr("</span>gvimfullscreen.dll<span class="string">", "</span>ToggleFullScreen<span class="string">", 0)&lt;CR&gt;</span></span><br><span class="line"><span class="string">endif</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">"</span> -----------------------------------------------------------------------------</span><br><span class="line"><span class="string">"  &lt; vimtweak 工具配置 &gt; 请确保以已装了工具</span></span><br><span class="line"><span class="string">"</span> -----------------------------------------------------------------------------</span><br><span class="line"><span class="string">" 这里只用于窗口透明与置顶</span></span><br><span class="line"><span class="string">"</span> 常规模式下 Ctrl + Up（上方向键） 增加不透明度，Ctrl + Down（下方向键） 减少不透明度，&lt;Leader&gt;t 窗口置顶与否切换</span><br><span class="line"><span class="keyword">if</span> (g:iswindows &amp;&amp; g:isGUI)</span><br><span class="line">    <span class="built_in">let</span> g:Current_Alpha = 255</span><br><span class="line">    <span class="built_in">let</span> g:Top_Most = 0</span><br><span class="line">    func! Alpha_add()</span><br><span class="line">        <span class="built_in">let</span> g:Current_Alpha = g:Current_Alpha + 10</span><br><span class="line">        <span class="keyword">if</span> g:Current_Alpha &gt; 255</span><br><span class="line">            <span class="built_in">let</span> g:Current_Alpha = 255</span><br><span class="line">        endif</span><br><span class="line">        call libcallnr(<span class="string">"vimtweak.dll"</span>,<span class="string">"SetAlpha"</span>,g:Current_Alpha)</span><br><span class="line">    endfunc</span><br><span class="line">    func! Alpha_sub()</span><br><span class="line">        <span class="built_in">let</span> g:Current_Alpha = g:Current_Alpha - 10</span><br><span class="line">        <span class="keyword">if</span> g:Current_Alpha &lt; 155</span><br><span class="line">            <span class="built_in">let</span> g:Current_Alpha = 155</span><br><span class="line">        endif</span><br><span class="line">        call libcallnr(<span class="string">"vimtweak.dll"</span>,<span class="string">"SetAlpha"</span>,g:Current_Alpha)</span><br><span class="line">    endfunc</span><br><span class="line">    func! Top_window()</span><br><span class="line">        <span class="keyword">if</span>  g:Top_Most == 0</span><br><span class="line">            call libcallnr(<span class="string">"vimtweak.dll"</span>,<span class="string">"EnableTopMost"</span>,1)</span><br><span class="line">            <span class="built_in">let</span> g:Top_Most = 1</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            call libcallnr(<span class="string">"vimtweak.dll"</span>,<span class="string">"EnableTopMost"</span>,0)</span><br><span class="line">            <span class="built_in">let</span> g:Top_Most = 0</span><br><span class="line">        endif</span><br><span class="line">    endfunc</span><br><span class="line"></span><br><span class="line">    <span class="string">"快捷键设置</span></span><br><span class="line"><span class="string">    nmap &lt;c-up&gt; :call Alpha_add()&lt;CR&gt;</span></span><br><span class="line"><span class="string">    nmap &lt;c-down&gt; :call Alpha_sub()&lt;CR&gt;</span></span><br><span class="line"><span class="string">    nmap &lt;leader&gt;t :call Top_window()&lt;CR&gt;</span></span><br><span class="line"><span class="string">endif</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">"</span> =============================================================================</span><br><span class="line"><span class="string">"                          &lt;&lt; 以下为常用自动命令配置 &gt;&gt;</span></span><br><span class="line"><span class="string">"</span> =============================================================================</span><br><span class="line"></span><br><span class="line"><span class="string">" 自动切换目录为当前编辑文件所在目录</span></span><br><span class="line"><span class="string">au BufRead,BufNewFile,BufEnter * cd %:p:h</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">"</span> =============================================================================</span><br><span class="line"><span class="string">"                     &lt;&lt; windows 下解决 Quickfix 乱码问题 &gt;&gt;</span></span><br><span class="line"><span class="string">"</span> =============================================================================</span><br><span class="line"><span class="string">" windows 默认编码为 cp936，而 Gvim(Vim) 内部编码为 utf-8，所以常常输出为乱码</span></span><br><span class="line"><span class="string">"</span> 以下代码可以将编码为 cp936 的输出信息转换为 utf-8 编码，以解决输出乱码问题</span><br><span class="line"><span class="string">" 但好像只对输出信息全部为中文才有满意的效果，如果输出信息是中英混合的，那可能</span></span><br><span class="line"><span class="string">"</span> 不成功，会造成其中一种语言乱码，输出信息全部为英文的好像不会乱码</span><br><span class="line"><span class="string">" 如果输出信息为乱码的可以试一下下面的代码，如果不行就还是给它注释掉</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">"</span> <span class="keyword">if</span> g:iswindows</span><br><span class="line"><span class="string">"     function QfMakeConv()</span></span><br><span class="line"><span class="string">"</span>         <span class="built_in">let</span> qflist = getqflist()</span><br><span class="line"><span class="string">"         for i in qflist</span></span><br><span class="line"><span class="string">"</span>            <span class="built_in">let</span> i.text = iconv(i.text, <span class="string">"cp936"</span>, <span class="string">"utf-8"</span>)</span><br><span class="line"><span class="string">"         endfor</span></span><br><span class="line"><span class="string">"</span>         call setqflist(qflist)</span><br><span class="line"><span class="string">"      endfunction</span></span><br><span class="line"><span class="string">"</span>      au QuickfixCmdPost make call QfMakeConv()</span><br><span class="line"><span class="string">" endif</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">"</span> =============================================================================</span><br><span class="line"><span class="string">"                          &lt;&lt; 其它 &gt;&gt;</span></span><br><span class="line"><span class="string">"</span> =============================================================================</span><br><span class="line"><span class="string">" 注：上面配置中的"</span>&lt;Leader&gt;<span class="string">"在本软件中设置为"</span>\<span class="string">"键（引号里的反斜杠），如&lt;Leader&gt;t</span></span><br><span class="line"><span class="string">"</span> 指在常规模式下按<span class="string">"\"键加"</span>t<span class="string">"键，这里不是同时按，而是先按"</span>\<span class="string">"键后按"</span>t<span class="string">"键，间隔在一</span></span><br><span class="line"><span class="string">"</span> 秒内，而&lt;Leader&gt;cs是先按<span class="string">"\"键再按"</span>c<span class="string">"又再按"</span>s<span class="string">"键；如要修改"</span>&lt;leader&gt;<span class="string">"键，可以把</span></span><br><span class="line"><span class="string">"</span> 下面的设置取消注释，并修改双引号中的键为你想要的，如修改为逗号键。</span><br><span class="line"></span><br><span class="line"><span class="string">" let mapleader = "</span>,<span class="string">"</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">"</span> <span class="string">" =============================================================================</span></span><br><span class="line"><span class="string">"</span> <span class="string">"                          &lt;&lt; 五笔拼音输入法 &gt;&gt;</span></span><br><span class="line"><span class="string">"</span> <span class="string">"                           调用 C + S + 空格</span></span><br><span class="line"><span class="string">"</span> <span class="string">" =============================================================================</span></span><br><span class="line"><span class="string">let g:ywvim_ims=[</span></span><br><span class="line"><span class="string">             \['wb', '五笔', 'wubi.ywvim'],</span></span><br><span class="line"><span class="string">             \['py', '拼音', 'pinyin.ywvim'],</span></span><br><span class="line"><span class="string">             \]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">let g:ywvim_py = &#123; 'helpim':'py', 'gb':0   &#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">let g:ywvim_zhpunc = 1</span></span><br><span class="line"><span class="string">let g:ywvim_listmax = 5</span></span><br><span class="line"><span class="string">let g:ywvim_esc_autoff = 0</span></span><br><span class="line"><span class="string">let g:ywvim_autoinput = 0</span></span><br><span class="line"><span class="string">let g:ywvim_circlecandidates = 1</span></span><br><span class="line"><span class="string">let g:ywvim_helpim_on = 0</span></span><br><span class="line"><span class="string">let g:ywvim_matchexact = 0</span></span><br><span class="line"><span class="string">let g:ywvim_chinesecode = 1</span></span><br><span class="line"><span class="string">let g:ywvim_gb = 0</span></span><br><span class="line"><span class="string">let g:ywvim_preconv = 'g2b'</span></span><br><span class="line"><span class="string">let g:ywvim_conv = ''</span></span><br><span class="line"><span class="string">let g:ywvim_lockb = 1</span></span><br></pre></td></tr></table></figure><blockquote><p>保存配置文件于 ~/.vimrc ，进入 vim 执行 <strong>:PluginInstall</strong>，进行插件安装</p></blockquote><h2 id="部分插件说明"><a href="#部分插件说明" class="headerlink" title="部分插件说明"></a>部分插件说明</h2><h3 id="Bundle"><a href="#Bundle" class="headerlink" title="Bundle"></a>Bundle</h3><p>Windows 使用 Bundle 安装插件之前还需要先安装 Git for Windows 然后将 git 目录加入环境变量 ，如 C:\Program Files (x86)\Git\bin 运行 vim 执行 :PluginInstall , 等待插件全部安装完成。</p><h3 id="ctags-自动提示"><a href="#ctags-自动提示" class="headerlink" title="ctags 自动提示"></a>ctags 自动提示</h3><blockquote><p>Ctags 需要先下载并编译 <a href="http://ctags.sf.net" target="_blank" rel="noopener">http://ctags.sf.net</a> , Windows版本下载 zip 文件 并加入环境变量 C:\Program Files (x86)\Vim\ctags58<br>Linux 下载源码包编译安装 或使用 apt-get 安装 </p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install ctags</span><br></pre></td></tr></table></figure><p>Mac 下使用 brew 安装<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install ctags</span><br></pre></td></tr></table></figure></p><blockquote><p>由于 mac 自带一个ctags，而taglist要求的是exuberant crags，所以我们给我们安装的 tags 一个别名</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim ~/.zsh_aliases</span><br></pre></td></tr></table></figure><blockquote><p>如果使用的是默认的 bash 那应该修改 ~/.bash_aliases 或者 ~/.profile</p></blockquote><p>添加行<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">alias</span> ctags2=<span class="string">"/usr/local/Cellar/ctags/5.8_1/bin/ctags"</span></span><br></pre></td></tr></table></figure></p><blockquote><p>使用 ctags 命令生成 ctags 文件</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ctags -R</span><br></pre></td></tr></table></figure><blockquote><p>生成完 ctags 文件于本目录中 Vim 中使用</p></blockquote><p>C + ] 命令跳转至函数定义处</p><p>C + t 返回跳转前函数</p><h3 id="Align-自动对齐"><a href="#Align-自动对齐" class="headerlink" title="Align 自动对齐"></a>Align 自动对齐</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">\t=  : align assignments (don<span class="string">'t count logic, like == or !=) </span></span><br><span class="line"><span class="string">\t,  : align on commas </span></span><br><span class="line"><span class="string">\t|  : align on vertical bars (|) </span></span><br><span class="line"><span class="string">\tsp : align on whitespace </span></span><br><span class="line"><span class="string">\tt  : align LaTeX tabular tables</span></span><br></pre></td></tr></table></figure><h3 id="ACK-快速查询函数定义"><a href="#ACK-快速查询函数定义" class="headerlink" title="ACK 快速查询函数定义"></a>ACK 快速查询函数定义</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install ack</span><br></pre></td></tr></table></figure><blockquote><p>默认配置中使用快捷键 F3 触发查看</p></blockquote><h3 id="NERDTree-文件目录树查看"><a href="#NERDTree-文件目录树查看" class="headerlink" title="NERDTree 文件目录树查看"></a>NERDTree 文件目录树查看</h3><blockquote><p>默认配置中使用快捷键 F2 切换打开/关闭<br>NERDTree提供了丰富的键盘操作方式来浏览和打开文件，一些常用的快捷键：</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">通过h j k l移动光标定位</span><br><span class="line">o 打开关闭文件或者目录，如果是文件的话，光标出现在打开的文件中</span><br><span class="line">go 效果同上，不过光标保持在文件目录里，类似预览文件内容的功能</span><br><span class="line">i和s可以水平分割或纵向分割窗口打开文件，前面加g类似go的功能</span><br><span class="line">t 在标签页中打开</span><br><span class="line">T 在后台标签页中打开</span><br><span class="line">p 到上层目录</span><br><span class="line">P 到根目录</span><br><span class="line">K 到同目录第一个节点</span><br><span class="line">J 到同目录最后一个节点</span><br><span class="line">m 显示文件系统菜单（添加、删除、移动操作）</span><br><span class="line">? 帮助</span><br><span class="line">q 关闭</span><br><span class="line"><span class="string">" &lt;Leader&gt;be 在当前窗口显示缓存列表并打开选定文件</span></span><br><span class="line"><span class="string">"</span> &lt;Leader&gt;bs 水平分割窗口显示缓存列表，并在缓存列表窗口中打开选定文件</span><br><span class="line"><span class="string">" &lt;Leader&gt;bv 垂直分割窗口显示缓存列表，并在缓存列表窗口中打开选定文件</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&lt;Leader&gt; 指 \ 反斜杠</span></span><br><span class="line"><span class="string">想了解更多操作方式，可以通过? 查看详细的帮助信息。</span></span><br></pre></td></tr></table></figure><h3 id="VIM-的其他命令"><a href="#VIM-的其他命令" class="headerlink" title="VIM 的其他命令"></a>VIM 的其他命令</h3><ul><li>转到您的目录 cd xx</li><li>首次启动时执行 ctags -R 自动生成 tag</li><li>启动VIM  vim</li><li>F2 打开左侧文件树，r 刷新当前目录 R 刷新全部目录</li><li>tb 打开右侧函数列表 （或 tl）</li><li>F3 打开变量/方法说明</li><li>C + ] 跳转至方法/变量 定义处 同上一个方法 只是这个会跳转, 如果只是想瞥一下方法的功能使用 F4 即可, F3 全项目搜索该函数定义</li><li>C + t 上一个方法跳过去后使用这个跳回来</li><li>C + p 全项目搜索文件名称</li><li>C + h / j /k / l 可以在多窗口中移动 亦可用于 主窗口中跳至文件树列表或跳至 函数列表等<br>在文件树窗口中</li><li>o 打开文件在主窗口 / 折叠或展开目录</li><li>t 在新 tab 中打开</li><li>T 在新 tab 中打开不激活（即后台）</li><li>i 水平分隔主窗口并打开该文件</li><li>s 纵向分隔主窗口并打开该文件</li><li>打开了多个文件后 \be 查看在缓存中的文件 （有点像 tab 如果没有关闭的都可以切换）<br>\cc 注释掉选择行 \cu 反注释 \cc 的行</li><li>如果开了多个 tab （即使用 t / T 打开了文件） gt 切换到下一个 tab  gT 切换到上一个 tab</li><li>自动提示 使用 C + j / C + k 选择列表中的内容</li><li>Html 文件中 emmet 使用 c + y 后 , 逗号 来展开</li><li>\t= 格式化选中行</li><li>Esc 离得比较远的可以将 Caps Lock 键换成 Esc 在 插入 (insert) 模式下 还可以使用 C + h / j / k / l 来移动 可参考 <a href="/2016/05/05/互换-Ctrl-Caps-Lock-按键/">互换-Ctrl-Caps-Lock-按键</a></li><li>输入中文 C + S + SPACE 默认五笔 z 键临时拼音，用拼音的直接删除配置中的五笔即可</li><li>编译相关 F9 保存、编译、打开</li></ul>]]></content>
      
      
        <tags>
            
            <tag> vim </tag>
            
            <tag> 编辑器 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Oh My Zsh</title>
      <link href="/2015/11/02/Oh-My-Zsh/"/>
      <url>/2015/11/02/Oh-My-Zsh/</url>
      <content type="html"><![CDATA[<blockquote><p>MAC 下的默认命令行工具是 bash 但同时也有 zsh 等，通过扩展 zsh 的  Oh My Zsh 来让我们的命令行更加便捷，提供诸如主题、插件等</p></blockquote><blockquote><p>zsh是兼容bash的，所以在bash上的绝大部分命令在zsh也是可用的 Oh My Zsh 只是 zsh的扩展，可以在任意终端上使用只需要有zsh支持即可安装该扩展</p></blockquote><h2 id="查看-Zsh-版本"><a href="#查看-Zsh-版本" class="headerlink" title="查看 Zsh 版本"></a>查看 Zsh 版本</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zsh -version</span><br></pre></td></tr></table></figure><p>输出类似版本号即已安装 zsh<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zsh 5.0.8 (x86_64-apple-darwin15.0)</span><br></pre></td></tr></table></figure></p><a id="more"></a><p>若没有安装 zsh 可通过 apt-get 进行安装<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install zsh</span><br></pre></td></tr></table></figure></p><h2 id="安装扩展-Oh-My-Zsh"><a href="#安装扩展-Oh-My-Zsh" class="headerlink" title="安装扩展 Oh My Zsh"></a>安装扩展 Oh My Zsh</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh -c <span class="string">"<span class="variable">$(wget https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh -O -)</span>"</span></span><br></pre></td></tr></table></figure><blockquote><p>没有安装 wget 的可以使用 curl</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh -c <span class="string">"<span class="variable">$(curl -fsSL https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh)</span>"</span></span><br></pre></td></tr></table></figure><blockquote><p>看到以下画面即为安装成功</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">         __                                     __   </span><br><span class="line">  ____  / /_     ____ ___  __  __   ____  _____/ /_  </span><br><span class="line"> / __ \/ __ \   / __ `__ \/ / / /  /_  / / ___/ __ \ </span><br><span class="line">/ /_/ / / / /  / / / / / / /_/ /    / /_(__  ) / / / </span><br><span class="line">\____/_/ /_/  /_/ /_/ /_/\__, /    /___/____/_/ /_/  </span><br><span class="line">                        /____/                       ....is now installed!</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Please look over the ~/.zshrc file to select plugins, themes, and options.</span><br><span class="line"></span><br><span class="line">p.s. Follow us at https://twitter.com/ohmyzsh.</span><br><span class="line"></span><br><span class="line">p.p.s. Get stickers and t-shirts at http://shop.planetargon.com.</span><br></pre></td></tr></table></figure><h2 id="修改-Oh-My-Zsh-主题本色"><a href="#修改-Oh-My-Zsh-主题本色" class="headerlink" title="修改 Oh My Zsh 主题本色"></a>修改 Oh My Zsh 主题本色</h2><p>编辑配置文件于本用户目录下</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim ~/.zshrc</span><br></pre></td></tr></table></figure><p>编辑主题 找到行 ZSH_THEME</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ZSH_THEME=<span class="string">"robbyrussel"</span></span><br></pre></td></tr></table></figure><blockquote><p>修改 ZSH_THEME 值来修改主题，主题样式参考 <a href="https://github.com/robbyrussell/oh-my-zsh/wiki/Themes" target="_blank" rel="noopener">https://github.com/robbyrussell/oh-my-zsh/wiki/Themes</a> 编辑完成后新建一个窗口即可看到效果 </p></blockquote><h2 id="修改默认终端为-zsh"><a href="#修改默认终端为-zsh" class="headerlink" title="修改默认终端为 zsh"></a>修改默认终端为 zsh</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chsh -s $(<span class="built_in">which</span> zsh)</span><br></pre></td></tr></table></figure><p>重新登录 </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="variable">$SHELL</span></span><br></pre></td></tr></table></figure><blockquote><p>若显示为 zsh 即修改成功, 新版本 Oh My Zsh 只需要提供 root 密码即可自动修改</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/bin/zsh</span><br></pre></td></tr></table></figure>]]></content>
      
      
        <tags>
            
            <tag> zsh </tag>
            
            <tag> bash </tag>
            
            <tag> 终端 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Homebrew 安装 PHP环境</title>
      <link href="/2015/08/26/Homebrew-%E5%AE%89%E8%A3%85-PHP%E7%8E%AF%E5%A2%83/"/>
      <url>/2015/08/26/Homebrew-%E5%AE%89%E8%A3%85-PHP%E7%8E%AF%E5%A2%83/</url>
      <content type="html"><![CDATA[<blockquote><p>homebrew 是 os x 上的包管理控制器类似于 apt-get 、yum 官网是 <a href="http://brew.sh" target="_blank" rel="noopener">http://brew.sh</a></p></blockquote><h2 id="安装方式-Homebrew"><a href="#安装方式-Homebrew" class="headerlink" title="安装方式 Homebrew"></a>安装方式 Homebrew</h2><p>打开 终端 执行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ruby -e <span class="string">"<span class="variable">$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)</span>"</span></span><br></pre></td></tr></table></figure><p>安装完成后更新 brew 源</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew update <span class="comment">#更新brew</span></span><br></pre></td></tr></table></figure><h3 id="brew-常用命令"><a href="#brew-常用命令" class="headerlink" title="brew 常用命令"></a>brew 常用命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">brew install APPNAME <span class="comment">#安装应用</span></span><br><span class="line"></span><br><span class="line">brew search APPNAME <span class="comment"># 搜索已有应用</span></span><br><span class="line"></span><br><span class="line">brew tap  GIHUB/user <span class="comment"># 安装扩展</span></span><br><span class="line"></span><br><span class="line">brew uncap GITHUB/user <span class="comment">#移除扩展</span></span><br><span class="line"></span><br><span class="line">brew remove APPNAME <span class="comment">#移除应用</span></span><br><span class="line"></span><br><span class="line">brew upgrade APPNAME <span class="comment">#更新应用</span></span><br><span class="line"></span><br><span class="line">brew options APPNAME <span class="comment">#查看安装信息</span></span><br><span class="line"></span><br><span class="line">brew info APPNAME <span class="comment">#查看应用信息</span></span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="安装-mysql"><a href="#安装-mysql" class="headerlink" title="安装 mysql"></a>安装 mysql</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install homebrew/versions/mysql56</span><br></pre></td></tr></table></figure><h3 id="MySQL开机启动："><a href="#MySQL开机启动：" class="headerlink" title="MySQL开机启动："></a>MySQL开机启动：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ln -sfv /usr/<span class="built_in">local</span>/opt/mysql56/*.plist ~/Library/LaunchAgents</span><br><span class="line">launchctl load ~/Library/LaunchAgents/homebrew.mxcl.mysql56.plist</span><br></pre></td></tr></table></figure><h3 id="安装完成之后开启MySQL安全机制："><a href="#安装完成之后开启MySQL安全机制：" class="headerlink" title="安装完成之后开启MySQL安全机制："></a>安装完成之后开启MySQL安全机制：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/<span class="built_in">local</span>/opt/mysql56/bin/mysql_secure_installation</span><br></pre></td></tr></table></figure><h2 id="安装-PHP-5-6"><a href="#安装-PHP-5-6" class="headerlink" title="安装 PHP 5.6"></a>安装 PHP 5.6</h2><h3 id="添加-PHP-扩展"><a href="#添加-PHP-扩展" class="headerlink" title="添加 PHP 扩展"></a>添加 PHP 扩展</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">brew tap homebrew/dupes</span><br><span class="line">brew tap josegonzalez/homebrew-php</span><br></pre></td></tr></table></figure><blockquote><p>可以使用brew options php56命令来查看安装选项</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install php56 --with-fpm --with-debug --with-gmp --with-imap --with-tidy --with-mysql --with-libmysql --with-homebrew-curl --with-homebrew-openssl --without-snmp</span><br></pre></td></tr></table></figure><h3 id="安装-PHP-扩展"><a href="#安装-PHP-扩展" class="headerlink" title="安装 PHP 扩展"></a>安装 PHP 扩展</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">brew install php56-apcu\</span><br><span class="line"> php56-gearman\</span><br><span class="line"> php56-geoip\</span><br><span class="line"> php56-gmagick\</span><br><span class="line"> php56-imagick\</span><br><span class="line"> php56-intl\</span><br><span class="line"> php56-mcrypt\</span><br><span class="line"> php56-redis\</span><br><span class="line"> php56-sphinx\</span><br><span class="line"> php56-mongo\</span><br><span class="line"> php56-mongodb\</span><br><span class="line"> php56-xdebug;</span><br></pre></td></tr></table></figure><blockquote><p>由于Mac自带了php和php-fpm，因此需要添加系统环境变量PATH来替代自带PHP版本。</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">'export PATH="$(brew --prefix php56)/bin:$PATH"'</span> &gt;&gt; ~/.bash_profile  <span class="comment">#for php</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'export PATH="$(brew --prefix php56)/sbin:$PATH"'</span> &gt;&gt; ~/.bash_profile  <span class="comment">#for php-fpm</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'export PATH="/usr/local/bin:/usr/local/sbin:$PATH"'</span> &gt;&gt; ~/.bash_profile <span class="comment">#for other brew install soft</span></span><br><span class="line"><span class="built_in">source</span> ~/.bash_profile</span><br></pre></td></tr></table></figure><h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">php -v    </span><br><span class="line">PHP 5.6.12 (cli) (built: Aug 25 2015 06:24:07) (DEBUG)</span><br><span class="line">Copyright (c) 1997-2015 The PHP Group</span><br><span class="line">Zend Engine v2.6.0, Copyright (c) 1998-2015 Zend Technologies</span><br></pre></td></tr></table></figure><blockquote><p>修改php-fpm配置文件，vim /usr/local/etc/php/5.6/php-fpm.conf，找到pid相关大概在25行，去掉注释 pid = run/php-fpm.pid, 那么php-fpm的pid文件就会自动产生在/usr/local/var/run/php-fpm.pid，下面要安装的Nginx pid文件也放在这里。</p></blockquote><h3 id="测试php-fpm配置"><a href="#测试php-fpm配置" class="headerlink" title="测试php-fpm配置"></a>测试php-fpm配置</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">php-fpm -t</span><br><span class="line">php-fpm -c /usr/<span class="built_in">local</span>/etc/php/5.6/php.ini -y /usr/<span class="built_in">local</span>/etc/php/5.6/php-fpm.conf -t</span><br></pre></td></tr></table></figure><h3 id="启动php-fpm"><a href="#启动php-fpm" class="headerlink" title="启动php-fpm"></a>启动php-fpm</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">php-fpm -D</span><br><span class="line">php-fpm -c /usr/<span class="built_in">local</span>/etc/php/5.6/php.ini -y /usr/<span class="built_in">local</span>/etc/php/5.6/php-fpm.conf -D</span><br></pre></td></tr></table></figure><h3 id="关闭php-fpm"><a href="#关闭php-fpm" class="headerlink" title="关闭php-fpm"></a>关闭php-fpm</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">kill</span> -INT `cat /usr/<span class="built_in">local</span>/var/run/php-fpm.pid`</span><br></pre></td></tr></table></figure><h3 id="重启php-fpm"><a href="#重启php-fpm" class="headerlink" title="重启php-fpm"></a>重启php-fpm</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">kill</span> -USR2 `cat /usr/<span class="built_in">local</span>/var/run/php-fpm.pid`</span><br></pre></td></tr></table></figure><h3 id="使用命令来启动php-fpm"><a href="#使用命令来启动php-fpm" class="headerlink" title="使用命令来启动php-fpm"></a>使用命令来启动php-fpm</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">launchctl load -w ~/Library/LaunchAgents/homebrew.mxcl.php56.plist</span><br></pre></td></tr></table></figure><blockquote><p>启动php-fpm之后，确保它正常运行监听9000端口：</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">lsof -Pni4 | grep LISTEN | grep php</span><br><span class="line">php-fpm   30907 XXX    9u  IPv4 0x9f5ee1b4361405d3      0t0  TCP 127.0.0.1:9000 (LISTEN)</span><br></pre></td></tr></table></figure><h3 id="PHP-FPM开机启动："><a href="#PHP-FPM开机启动：" class="headerlink" title="PHP-FPM开机启动："></a>PHP-FPM开机启动：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ln -sfv /usr/<span class="built_in">local</span>/opt/php56/*.plist ~/Library/LaunchAgents</span><br><span class="line">launchctl load ~/Library/LaunchAgents/homebrew.mxcl.php56.plist</span><br></pre></td></tr></table></figure><h2 id="安装php-composer"><a href="#安装php-composer" class="headerlink" title="安装php composer"></a>安装php composer</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install composer</span><br></pre></td></tr></table></figure><h3 id="检查一下情况"><a href="#检查一下情况" class="headerlink" title="检查一下情况"></a>检查一下情况</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">composer --version</span><br><span class="line">Composer version 1.0.0-alpha8 2014-01-06 18:39:59</span><br></pre></td></tr></table></figure><h2 id="安装Nginx"><a href="#安装Nginx" class="headerlink" title="安装Nginx"></a>安装Nginx</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install nginx --with-http_geoip_module</span><br></pre></td></tr></table></figure><h3 id="测试配置是否有语法错误"><a href="#测试配置是否有语法错误" class="headerlink" title="测试配置是否有语法错误"></a>测试配置是否有语法错误</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nginx -t</span><br></pre></td></tr></table></figure><h3 id="打开-nginx"><a href="#打开-nginx" class="headerlink" title="打开 nginx"></a>打开 nginx</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nginx</span><br></pre></td></tr></table></figure><h3 id="重新加载配置-重启-停止-退出-nginx"><a href="#重新加载配置-重启-停止-退出-nginx" class="headerlink" title="重新加载配置|重启|停止|退出 nginx"></a>重新加载配置|重启|停止|退出 nginx</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nginx -s reload|reopen|stop|quit</span><br></pre></td></tr></table></figure><blockquote><p>也可以使用Mac的launchctl来启动|停止</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">launchctl unload ~/Library/LaunchAgents/homebrew.mxcl.nginx.plist</span><br><span class="line">launchctl load -w ~/Library/LaunchAgents/homebrew.mxcl.nginx.plist</span><br></pre></td></tr></table></figure><h3 id="Nginx开机启动"><a href="#Nginx开机启动" class="headerlink" title="Nginx开机启动"></a>Nginx开机启动</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ln -sfv /usr/<span class="built_in">local</span>/opt/nginx/*.plist ~/Library/LaunchAgents</span><br><span class="line">launchctl load ~/Library/LaunchAgents/homebrew.mxcl.nginx.plist</span><br></pre></td></tr></table></figure><p>Nginx监听80端口需要root权限执行，因此：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo chown root:wheel /usr/<span class="built_in">local</span>/Cellar/nginx/1.6.0_1/bin/nginx</span><br><span class="line">sudo chmod u+s /usr/<span class="built_in">local</span>/Cellar/nginx/1.6.0_1/bin/nginx</span><br></pre></td></tr></table></figure><h2 id="创建-NGINX-配置"><a href="#创建-NGINX-配置" class="headerlink" title="创建 NGINX 配置"></a>创建 NGINX 配置</h2><h3 id="配置nginx-conf创建需要用到的目录："><a href="#配置nginx-conf创建需要用到的目录：" class="headerlink" title="配置nginx.conf创建需要用到的目录："></a>配置nginx.conf创建需要用到的目录：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /usr/<span class="built_in">local</span>/var/logs/nginx</span><br><span class="line">mkdir -p /usr/<span class="built_in">local</span>/etc/nginx/sites-available</span><br><span class="line">mkdir -p /usr/<span class="built_in">local</span>/etc/nginx/sites-enabled</span><br><span class="line">mkdir -p /usr/<span class="built_in">local</span>/etc/nginx/conf.d</span><br><span class="line">mkdir -p /usr/<span class="built_in">local</span>/etc/nginx/ssl</span><br><span class="line">sudo mkdir -p /var/www</span><br><span class="line">sudo chown :staff /var/www</span><br><span class="line">sudo chmod 775 /var/www</span><br></pre></td></tr></table></figure><blockquote><p>创建配置文件</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /usr/<span class="built_in">local</span>/etc/nginx/nginx.conf</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">worker_processes  1;</span><br><span class="line"></span><br><span class="line">error_log   /usr/<span class="built_in">local</span>/var/logs/nginx/error.log debug;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">pid        /usr/<span class="built_in">local</span>/var/run/nginx.pid;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">events &#123;</span><br><span class="line">    worker_connections  256;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">http &#123;</span><br><span class="line">    include       mime.types;</span><br><span class="line">    default_type  application/octet-stream;</span><br><span class="line"></span><br><span class="line">    log_format  main  <span class="string">'$remote_addr - $remote_user [$time_local] "$request" '</span></span><br><span class="line">                      <span class="string">'$status $body_bytes_sent "$http_referer" '</span></span><br><span class="line">                      <span class="string">'"$http_user_agent" "$http_x_forwarded_for"'</span>;</span><br><span class="line"></span><br><span class="line">    access_log  /usr/<span class="built_in">local</span>/var/logs/access.log  main;</span><br><span class="line"></span><br><span class="line">    sendfile        on;</span><br><span class="line">    keepalive_timeout  65;</span><br><span class="line">    port_in_redirect off;</span><br><span class="line"></span><br><span class="line">    include /usr/<span class="built_in">local</span>/etc/nginx/sites-enabled/*;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="设置-nginx-php-fpm-配置文件"><a href="#设置-nginx-php-fpm-配置文件" class="headerlink" title="设置 nginx php-fpm 配置文件"></a>设置 nginx php-fpm 配置文件</h2><blockquote><p>创建 php-fpm 配置</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /usr/<span class="built_in">local</span>/etc/nginx/conf.d/php-fpm</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#proxy the php scripts to php-fpm</span></span><br><span class="line">location ~ \.php$ &#123;</span><br><span class="line">    try_files                   <span class="variable">$uri</span> = 404;</span><br><span class="line">    fastcgi_pass                127.0.0.1:9000;</span><br><span class="line">    fastcgi_index               index.php;</span><br><span class="line">    fastcgi_intercept_errors    on;</span><br><span class="line">    include /usr/<span class="built_in">local</span>/etc/nginx/fastcgi.conf;</span><br><span class="line">&#125;</span><br><span class="line"> nginx虚拟主机准备工作</span><br><span class="line"></span><br><span class="line"><span class="comment">#创建 info.php index.html 404.html 403.html文件到 /var/www 下面</span></span><br><span class="line">vi /var/www/info.php</span><br><span class="line">vi /var/www/index.html</span><br><span class="line">vi /var/www/403.html</span><br><span class="line">vi /var/www/404.html</span><br><span class="line"> 创建默认虚拟主机defaultvim /usr/<span class="built_in">local</span>/etc/nginx/sites-available/default输入：</span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line">    listen       80;</span><br><span class="line">    server_name  localhost;</span><br><span class="line">    root         /var/www/;</span><br><span class="line"></span><br><span class="line">    access_log  /usr/<span class="built_in">local</span>/var/logs/nginx/default.access.log  main;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        index  index.html index.htm index.php;</span><br><span class="line">        autoindex   on;</span><br><span class="line">        include     /usr/<span class="built_in">local</span>/etc/nginx/conf.d/php-fpm;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    location = /info &#123;</span><br><span class="line">        allow   127.0.0.1;</span><br><span class="line">        deny    all;</span><br><span class="line">        rewrite (.*) /.info.php;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    error_page  404     /404.html;</span><br><span class="line">    error_page  403     /403.html;</span><br><span class="line">&#125;</span><br><span class="line"> 创建ssl默认虚拟主机default-sslvim /usr/<span class="built_in">local</span>/etc/nginx/sites-available/default-ssl输入：</span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line">    listen       443;</span><br><span class="line">    server_name  localhost;</span><br><span class="line">    root       /var/www/;</span><br><span class="line"></span><br><span class="line">    access_log  /usr/<span class="built_in">local</span>/var/logs/nginx/default-ssl.access.log  main;</span><br><span class="line"></span><br><span class="line">    ssl                  on;</span><br><span class="line">    ssl_certificate      ssl/localhost.crt;</span><br><span class="line">    ssl_certificate_key  ssl/localhost.key;</span><br><span class="line"></span><br><span class="line">    ssl_session_timeout  5m;</span><br><span class="line"></span><br><span class="line">    ssl_protocols  SSLv2 SSLv3 TLSv1;</span><br><span class="line">    ssl_ciphers  HIGH:!aNULL:!MD5;</span><br><span class="line">    ssl_prefer_server_ciphers   on;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        include   /usr/<span class="built_in">local</span>/etc/nginx/conf.d/php-fpm;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    location = /info &#123;</span><br><span class="line">        allow   127.0.0.1;</span><br><span class="line">        deny    all;</span><br><span class="line">        rewrite (.*) /.info.php;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    error_page  404     /404.html;</span><br><span class="line">    error_page  403     /403.html;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>设置SSL</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /usr/<span class="built_in">local</span>/etc/nginx/ssl</span><br><span class="line">openssl req -new -newkey rsa:4096 -days 365 -nodes -x509 -subj <span class="string">"/C=US/ST=State/L=Town/O=Office/CN=localhost"</span> -keyout /usr/<span class="built_in">local</span>/etc/nginx/ssl/localhost.key -out /usr/<span class="built_in">local</span>/etc/nginx/ssl/localhost.crt</span><br></pre></td></tr></table></figure><h3 id="创建虚拟主机软连接，开启虚拟主机"><a href="#创建虚拟主机软连接，开启虚拟主机" class="headerlink" title="创建虚拟主机软连接，开启虚拟主机"></a>创建虚拟主机软连接，开启虚拟主机</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ln -sfv /usr/<span class="built_in">local</span>/etc/nginx/sites-available/default /usr/<span class="built_in">local</span>/etc/nginx/sites-enabled/default</span><br><span class="line">ln -sfv /usr/<span class="built_in">local</span>/etc/nginx/sites-available/default-ssl /usr/<span class="built_in">local</span>/etc/nginx/sites-enabled/default-ssl</span><br></pre></td></tr></table></figure><h2 id="启动-停止Nginx"><a href="#启动-停止Nginx" class="headerlink" title="启动|停止Nginx"></a>启动|停止Nginx</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">launchctl load -w ~/Library/LaunchAgents/homebrew.mxcl.nginx.plist</span><br><span class="line">launchctl unload -w ~/Library/LaunchAgents/homebrew.mxcl.nginx.plist</span><br></pre></td></tr></table></figure><h2 id="快捷服务控制命令"><a href="#快捷服务控制命令" class="headerlink" title="快捷服务控制命令"></a>快捷服务控制命令</h2><blockquote><p>为了后面管理方便，将命令 alias 下，vim ~/.bash_aliases 输入一下内容：</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">alias</span> nginx.start=<span class="string">'launchctl load -w ~/Library/LaunchAgents/homebrew.mxcl.nginx.plist'</span></span><br><span class="line"><span class="built_in">alias</span> nginx.stop=<span class="string">'launchctl unload -w ~/Library/LaunchAgents/homebrew.mxcl.nginx.plist'</span></span><br><span class="line"><span class="built_in">alias</span> nginx.restart=<span class="string">'nginx.stop &amp;&amp; nginx.start'</span></span><br><span class="line"><span class="built_in">alias</span> php-fpm.start=<span class="string">"launchctl load -w ~/Library/LaunchAgents/homebrew.mxcl.php56.plist"</span></span><br><span class="line"><span class="built_in">alias</span> php-fpm.stop=<span class="string">"launchctl unload -w ~/Library/LaunchAgents/homebrew.mxcl.php56.plist"</span></span><br><span class="line"><span class="built_in">alias</span> php-fpm.restart=<span class="string">'php-fpm.stop &amp;&amp; php-fpm.start'</span></span><br><span class="line"><span class="built_in">alias</span> mysql.start=<span class="string">"launchctl load -w ~/Library/LaunchAgents/homebrew.mxcl.mysql.plist"</span></span><br><span class="line"><span class="built_in">alias</span> mysql.stop=<span class="string">"launchctl unload -w ~/Library/LaunchAgents/homebrew.mxcl.mysql.plist"</span></span><br><span class="line"><span class="built_in">alias</span> mysql.restart=<span class="string">'mysql.stop &amp;&amp; mysql.start'</span></span><br><span class="line"><span class="built_in">alias</span> redis.start=<span class="string">"launchctl load -w ~/Library/LaunchAgents/homebrew.mxcl.redis.plist"</span></span><br><span class="line"><span class="built_in">alias</span> redis.stop=<span class="string">"launchctl unload -w ~/Library/LaunchAgents/homebrew.mxcl.redis.plist"</span></span><br><span class="line"><span class="built_in">alias</span> redis.restart=<span class="string">'redis.stop &amp;&amp; redis.start'</span></span><br><span class="line">``` </span><br><span class="line"></span><br><span class="line">&gt;让快捷命令生效</span><br><span class="line">```bash</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"[[ -f ~/.bash_aliases ]] &amp;&amp; . ~/.bash_aliases"</span> &gt;&gt; ~/.bash_profile     </span><br><span class="line"><span class="built_in">source</span> ~/.bash_profile</span><br></pre></td></tr></table></figure>]]></content>
      
      
        <tags>
            
            <tag> homebrew </tag>
            
            <tag> php </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>VIM 配色方案 Molokai</title>
      <link href="/2015/07/09/VIM-%E9%85%8D%E8%89%B2%E6%96%B9%E6%A1%88-Molokai/"/>
      <url>/2015/07/09/VIM-%E9%85%8D%E8%89%B2%E6%96%B9%E6%A1%88-Molokai/</url>
      <content type="html"><![CDATA[<p>修改 VIM 配置文件来支持本本色方案</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim ~/.vimrc</span><br></pre></td></tr></table></figure><p>添加以下配置</p><a id="more"></a><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">syntax <span class="built_in">enable</span></span><br><span class="line"></span><br><span class="line">syntax on</span><br><span class="line"></span><br><span class="line"><span class="built_in">set</span> nu</span><br><span class="line"></span><br><span class="line"><span class="built_in">set</span> t_Co=256</span><br><span class="line"></span><br><span class="line"><span class="built_in">set</span> background=dark</span><br><span class="line"></span><br><span class="line">colorscheme molokai</span><br></pre></td></tr></table></figure><p>下载配色方案 至 ~/.vim/colors 或 /usr/share/vim/vim74/colors </p><blockquote><p><a href="https://github.com/tomasr/molokai/blob/master/colors/molokai.vim" target="_blank" rel="noopener">https://github.com/tomasr/molokai/blob/master/colors/molokai.vim</a></p></blockquote><p>或直接使用下载命令</p><blockquote><p>wget <a href="https://raw.githubusercontent.com/tomasr/molokai/master/colors/molokai.vim" target="_blank" rel="noopener">https://raw.githubusercontent.com/tomasr/molokai/master/colors/molokai.vim</a> -P ~/.vim/colors</p></blockquote>]]></content>
      
      
        <tags>
            
            <tag> vim </tag>
            
            <tag> molokai </tag>
            
        </tags>
      
    </entry>
    
  
  
</search>
